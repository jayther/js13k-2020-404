!function(r,i){var w={t:"Mail Delivery",width:640,height:360,minMailableRooms:2,maxMailableRoomRate:.25,minMissingPeople:5,maxMissingPeople:10},S={i:{s:"robot_3Dblue.png"},n:{e:"repeat",r:"repeat",o:"repeat"},a:{},u:{}};function W(t,i){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(h[e]=n[e])}return h}function t(){return W.apply(this,[{}].concat(Array.prototype.slice.call(arguments)))}function e(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var h,o=(h={},{c:function(t){return h[t]||(h[t]=i.getElementById(t)),h[t]},create:function(t){return i.createElement(t)}});function a(h,s){var n={},t={f:function(t){var i=t.keyCode;e(n,i)||(n[i]=!1),n[i]||h(i),n[i]=!0,t.preventDefault()},l:function(t){var i=t.keyCode;e(n,i)||(n[i]=!1),n[i]&&s(i),n[i]=!1,t.preventDefault()},v:function(){r.removeEventListener("keydown",t.f,!1),r.removeEventListener("keyup",t.l,!1)}};return r.addEventListener("keydown",t.f,!1),r.addEventListener("keyup",t.l,!1),t}a.keys={d:65,w:87,p:83,m:68,M:90,b:81,left:37,g:38,right:39,k:40,O:32,I:13};var z=null;z={A:function(t,i){return t+Math.random()*(i-t)},D:function(t,i){return Math.floor(z.A(t,i))},j:function(t){return t[z.D(0,t.length)]},C:function(t){var i=z.D(0,t.length),h=t[i];return t.splice(i,1),h},P:function(t){for(var i=[],h=0;0<t;)1&t&&i.push(1<<h),t>>=1,h+=1;return 0<i.length?z.j(i):0}};var E={F:function(t,i){return t.left<i.right&&t.right>i.left&&t.top<i.bottom&&t.bottom>i.top},R:function(t){return Math.atan2(t.y,t.x)},S:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Q:function(t,i){var h=Math.cos(i),s=Math.sin(i);return{x:t.x*h-t.y*s,y:t.x*s+t.y*h}},W:function(t,i,h){if(0===h)return{left:t.left,top:t.top,right:t.right,bottom:t.bottom};var s,n,e=t.right-t.left,r=t.bottom-t.top,o=h/360*Math.PI*2;return 90!==h&&270!==h||(n=e,e=r,r=n),(s=90===h?{x:t.left,y:t.bottom}:180===h?{x:t.right,y:t.bottom}:{x:t.right,y:t.top}).x-=i.x,s.y-=i.y,s=E.Q(s,o),{left:i.x+s.x,top:i.y+s.y,right:i.x+s.x+e,bottom:i.y+s.y+r}}};function T(t,i,h,s){this.x=t||0,this.y=i||0,this.z=h||0,this.T=s||0}function p(t){this.B=W({N:null,X:null,from:0,Y:1,H:1,L:p._.V,q:null},t||{}),this.U=-1,this.G=-1,this.Z=!1}function u(){this.J=0,this.K=[]}function s(t){var i=W({x:0,y:0,$:1,tt:1,angle:0,it:!0,alpha:1,ht:0,st:0,nt:0,et:0},t||{});this.rt=null,this.x=i.x,this.y=i.y,this.$=i.$,this.tt=i.tt,this.angle=i.angle,this.it=i.it,this.alpha=i.alpha,this.ht=i.ht,this.st=i.st,this.nt=i.nt,this.et=i.et}function c(t){s.apply(this,arguments),this.ot=[]}function B(t){s.apply(this,arguments);var i=W({w:0,h:0,at:"black",ut:0},t||{});this.ut=i.ut,this.w=i.w,this.h=i.h,this.at=i.at}function f(t){s.apply(this,arguments);var i=W({w:0,h:0,ct:null},t||{});this.w=i.w,this.h=i.h,this.ct=i.ct,this.w&&!i.$&&(this.$=this.w/this.ct.width),this.h&&!i.tt&&(this.tt=this.h/this.ct.height)}function l(t){s.apply(this,arguments);var i=W({ft:"",lt:"left",wt:"top",font:null,at:"black"},t||{});this.at=i.at,this.ft=i.ft,this.lt=i.lt,this.wt=i.wt,this.font=i.font}function n(t){s.apply(this,arguments);var i=W({vt:[],at:"black"},t||{});this.vt=i.vt,this.at=i.at}function v(t){c.apply(this,arguments);var i=W({w:100,h:100},t||{});this.dt=o.create("canvas"),this.dt.width=i.w,this.dt.height=i.h,this.pt=this.dt.getContext("2d")}function d(t,i,h,s,n){var e,r=[],o=s/(h-1);for(e=0;e<h;e+=1)r.push({x:e*o,y:t+i-n/2}),i*=-1;for(i*=-1,e=h-1;0<=e;e-=1)r.push({x:e*o,y:t+i+n/2}),i*=-1;return r}T.yt=function(t){return new T((t.left+t.right)/2,(t.top+t.bottom)/2,(t.right-t.left)/2,(t.bottom-t.top)/2)},(T.prototype={}).mt=function(t,i){this.x=t||0,this.y=i||0},T.prototype.Mt=function(){return this.x-this.z},T.prototype.bt=function(){return this.y-this.T},T.prototype.xt=function(){return this.x+this.z},T.prototype.gt=function(){return this.y+this.T},T.prototype.kt=function(){return 2*this.z},T.prototype.Ot=function(){return 2*this.T},T.prototype.It=function(t){return Math.abs(this.x-t.x)<this.z+t.z&&Math.abs(this.y-t.y)<this.T+t.T},T.prototype.At=function(t,i){return Math.abs(this.x-t)<this.z&&Math.abs(this.y-i)<this.T},T.prototype.Dt=function(){return new T(this.x,this.y,this.z,this.T)},T.prototype.jt=function(t){return this.z+=t,this.T+=t,this},T.prototype.Ct=function(t,i){var h,s=i/360*Math.PI*2;90!==i&&270!==i||(h=this.z,this.z=this.T,this.T=h);var n=E.Q({x:this.x-t.x,y:this.y-t.y},s);return this.x=t.x+n.x,this.y=t.y+n.y,this},T.prototype.Pt=function(){return{left:this.x-this.z,top:this.y-this.T,right:this.x+this.z,bottom:this.y+this.T}},T.prototype.Ft=function(){return{x:this.x-this.z,y:this.y-this.T,w:2*this.z,h:2*this.T}},p._={V:function(t){return t},Rt:function(t){return t*t},St:function(t){return t*(2-t)},Et:function(t){return t<.5?2*t*t:(4-2*t)*t-1},Qt:function(t){return t*t*t},Wt:function(t){return--t*t*t+1},zt:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Tt:function(t){return t*t*t*t},Bt:function(t){return 1- --t*t*t*t},Nt:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},Xt:function(t){return t*t*t*t*t},Yt:function(t){return 1+--t*t*t*t*t},Ht:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},p.prototype={Lt:function(t){this.U=t,this.G=t+this.B.H},Vt:function(t){if(this.B.N&&this.B.X){var i=(t-this.U)/this.B.H;1<i&&(i=1);var h=this.B.L(i),s=this.B.from+(this.B.Y-this.B.from)*h;this.B.N[this.B.X]=s}},_t:function(){this.Z=!0}},u.qt=null,u.prototype={Ut:function(t){t.Lt(this.J),this.K.push(t)},Vt:function(t){var i,h,s;for(i=0;i<this.K.length;i+=1)s=!1,(h=this.K[i]).Z||h.Vt(this.J),h.Z?s=!0:this.J>=h.G&&(h.B.q&&h.B.q(),s=!0),s&&(this.K.splice(i,1),i-=1);this.J+=t}},c.prototype=t(s.prototype={Gt:function(t){this.it&&.01<=this.alpha&&(t.save(),(this.x||this.y)&&t.translate(this.x,this.y),1===this.$&&1===this.tt||t.scale(this.$,this.tt),this.angle&&t.rotate(this.angle),(this.ht||this.st)&&t.translate(-this.ht,-this.st),this.alpha<1&&(t.globalAlpha*=this.alpha),this.Zt(t),(this.nt||this.et)&&t.translate(this.nt,this.et),t.restore())},Zt:function(t){}},{Jt:function(t){return this.ot.push(t),t.rt=this},Kt:function(t){var i=this.ot.indexOf(t);return 0<=i&&(this.ot.splice(i,1),t.rt=null),this},Zt:function(t){for(var i=0;i<this.ot.length;i+=1)this.ot[i].Gt(t)}}),B.prototype=t(s.prototype,{Zt:function(t){if(t.fillStyle=this.at,this.ut){var i=this.ut,h=this.w,s=this.h;t.beginPath(),t.moveTo(i,0),t.lineTo(h-i,0),t.arcTo(h,0,h,i,i),t.lineTo(h,s-i),t.arcTo(h,s,h-i,s,i),t.lineTo(i,s),t.arcTo(0,s,0,s-i,i),t.lineTo(0,i),t.arcTo(0,0,i,0,i),t.closePath(),t.fill()}else t.fillRect(0,0,this.w,this.h)}}),f.prototype=t(s.prototype,{Zt:function(t){t.drawImage(this.ct,0,0)}}),l.prototype=t(s.prototype,{Zt:function(t){this.font&&(t.font=this.font),t.textAlign=this.lt,t.textBaseline=this.wt,t.fillStyle=this.at,t.fillText(this.ft,0,0)}}),n.prototype=t(s.prototype,{Zt:function(t){var i,h;for(t.beginPath(),i=0;i<this.vt.length;i+=1)h=this.vt[i],0===i?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);t.closePath(),t.fillStyle=this.at,t.fill()}}),v.prototype=t(c.prototype,{$t:function(t,i){this.dt.width=t,this.dt.height=i},Jt:function(t){c.prototype.Jt.apply(this,arguments),this.ti()},Kt:function(t){c.prototype.Kt.apply(this,arguments),this.ti()},ti:function(){this.pt.clearRect(0,0,this.dt.width,this.dt.height);for(var t=0;t<this.ot.length;t+=1)this.ot[t].Gt(this.pt)},Zt:function(t){t.drawImage(this.dt,0,0)}});var y,m,M,b=((y=new v({w:70,h:70})).Jt(new B({w:70,h:70,at:"#c99869"})),y.Jt(new n({vt:d(25,5,7,70,16),at:"#c58f5c"})),y.Jt(new n({vt:d(55,5,7,70,16),at:"#c58f5c"})),y),x=((m=new v({w:70,h:70})).Jt(new B({w:70,h:70,at:"#838796"})),m.Jt(new n({vt:d(25,5,7,70,24),at:"#7e8291"})),m.Jt(new n({vt:d(55,5,7,70,16),at:"#7e8291"})),m),g=((M=new v({w:70,h:70})).Jt(new B({w:70,h:70,at:"#acc0c1"})),M.Jt(new n({vt:d(25,5,7,70,16),at:"#bbcbcc"})),M.Jt(new n({vt:d(55,5,7,70,16),at:"#bbcbcc"})),M);function Q(t,i){this.ii=t,this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom,this.hi=0,this.si=[],this.ni=[],this.ei=!1,this.ri=null,this.oi=0,this.ai=!1}function k(t,i,h,s,n,e,r){this.ii=k.ui++,this.hi=t,this.ci=r;var o=i-s/2,a=h;this.fi=new T((i+o)/2,(h+a)/2,(s+e/2)/2+k.li,(n+e/2)/2+k.li),this.wi=[new B({x:i-s/2,y:h-n/2,w:s,h:n,at:"#990000"}),new B({x:i-s/2-e/2,y:h-e/2,w:e,h:e,at:"#990000"})],this.ai=!1,this.vi=-1,this.di=-1,this.pi=null,this.yi=null,this.mi=null,this.Mi=null,this.bi=null}function N(){c.apply(this,arguments),this.xi={},this.gi=20,this.ki=1e3,this.Oi=20,this.Ii=20,this.Ai=100,this.Di=12,this.ji=12,this.Ci=2,this.Pi=0,this.Fi=0,this.Ri=[],this.Si=[],this.Ei=null,this.Qi=[],this.Wi=0,this.zi=0,this.Ti=new v,this.Jt(this.Ti)}function O(t,i){c.call(this,i),this.yi=t;var h=W({pi:null},i||{});this.Bi=new T(0,0,10,10),this.Ni=new T(0,0,10,10),this.Xi=new T(0,0,10,10),this.Yi=200,this.Hi=4,this.Li={x:0,y:0},this.Vi={x:0,y:0},this._i={x:0,y:0},this.pi=h.pi,this.qi=null;var s=new f({ct:S.a.s,w:19,h:20,ht:74,st:77});this.Jt(s),this.ct=s,this.Ui=!0,this.Gi=!0,this.Zi=0}function I(t,i){c.call(this),this.Ji=t,this.B=i,this.Ki=[]}function A(){I.apply(this,arguments),this.$i=[],this.th=[],this.ih=[],this.hh=[],this.sh={},this.nh={eh:60,rh:70,oh:60,ah:70},this.Pi=z.D(this.nh.eh,this.nh.rh),this.Fi=z.D(this.nh.oh,this.nh.ah);var t=new B({w:w.width,h:w.height,at:"#333333"});if(this.Jt(t),this.pi=new N,this.Jt(this.pi),this.pi.uh(this.Pi,this.Fi),this.pi.ch(),this.pi.fh(),this.pi.$=2,this.pi.tt=2,this.lh=new c({x:w.width/2,y:w.height/2}),this.Jt(this.lh),this.wh=new l({ft:"...",x:5,y:5,lt:"left",wt:"top",font:"16px Arial",at:"#ffffff"}),this.Jt(this.wh),this.vh(),this.dh=!1,this.dh){var i=this.pi.Pi*this.pi.gi,h=this.pi.Fi*this.pi.gi;i/h>w.width/w.height?this.pi.$=this.pi.tt=w.width/i:this.pi.$=this.pi.tt=w.height/h,this.pi.Ri.forEach(function(t){t.ri.it=!1}),this.pi.Si[0].ri.it=!1}this.ph=new O(this,{pi:this.pi});this.pi.Jt(this.ph);var s=this.pi.Ei;this.ph.x=(s.left+s.right)/2*this.pi.gi,this.ph.y=(s.top+s.bottom)/2*this.pi.gi,this.ph.yh(),this.keys=[],this.mh={},this.mh[N.Mh.left]=[a.keys.d,a.keys.b,a.keys.left],this.mh[N.Mh.top]=[a.keys.w,a.keys.M,a.keys.g],this.mh[N.Mh.right]=[a.keys.m,a.keys.right],this.mh[N.Mh.bottom]=[a.keys.p,a.keys.k];var n={};Object.entries(this.mh).forEach(function(i){i[1].forEach(function(t){n[t]=i[0]})}),this.bh=n,this.xh=a(this.gh.bind(this),this.kh.bind(this));this.Oh(this.Ih.bind(this))}function D(t,i){return t.concat(i.si.filter(function(t){return t.hi===N.Dh.Ah||t.hi===N.Dh.jh}))}function j(t){t.ai=!0}function C(t){var i=new c;return i.Jt(new n({x:150,y:0,vt:[{x:20,y:0},{x:-15,y:-10},{x:-15,y:10}],at:t})),i}function P(){I.apply(this,arguments),this.J=0,this.Ch=2,this.Jt(new B({w:w.width,h:w.height,at:"#777777"})),this.s=new f({ct:S.a.s,x:w.width/2,y:150,w:148,h:154,ht:74,st:77}),this.Jt(this.s);var t=new l({ft:"Employee Not Found",font:"32px Arial",x:w.width/2,y:50,lt:"center",wt:"middle",at:"white"});this.Jt(t);var i=new c({x:w.width/2,y:270});this.Jt(i);var h=this.Ph=[new F(0,0,"W",0,this.Ji.Fh),new F(-45,45,"A",.125,this.Ji.Fh),new F(0,45,"S",.25,this.Ji.Fh),new F(45,45,"D",.375,this.Ji.Fh)];this.Ph.forEach(function(t){i.Jt(t.Rh),t.Lt()});var s=[["W","A","S","D"],["↑","←","↓","→"],["Z","Q","S","D"]],n=0;this.Sh=setInterval(function(){s.length<=(n+=1)&&(n=0),h.forEach(function(t,i){t.Eh.ft=s[n][i]})},1e3);var e=[a.keys.d,a.keys.w,a.keys.p,a.keys.m,a.keys.b,a.keys.M,a.keys.left,a.keys.g,a.keys.right,a.keys.k];this.xh=a(function(){},function(i){e.some(function(t){return t===i})&&this.Ji.Qh(new A(this.Ji))}.bind(this)),this.Oh(this.Ih.bind(this))}function F(t,i,h,s,n){var e=new c({x:t,y:i});this.Rh=e,this.Wh=!1,this.zh=s||0,this.Fh=n;var r=new B({x:-20,y:-5,w:40,h:25,at:"#cccccc",ut:5});e.Jt(r),this.Th=r;var o=new c({x:0,y:5});this.Bh=o,e.Jt(o);var a=new B({x:-20,y:-40,w:40,h:40,at:"#ffffff",ut:5});o.Jt(a);var u=new l({x:0,y:-20,ft:h,font:"20px Arial",at:"black",lt:"center",wt:"middle"});o.Jt(u),this.Eh=u,this.K=[]}function R(){I.apply(this,arguments),this.i=[],this.Nh=!1,this.Xh=new l({x:w.width/2,y:w.height/2,ft:"0%",at:"black",lt:"center",wt:"middle",font:"32px Arial"}),this.Jt(new B({w:w.width,h:w.height,at:"#777777"})),this.Jt(this.Xh)}function X(){this.Vt=this.Vt.bind(this),this.Yh=o.c("root");var t=o.create("canvas");t.width=w.width,t.height=w.height,this.Yh.appendChild(t),this.Hh=S,this.dt=t,this.pt=t.getContext("2d"),this.pt.font="16px Arial",this.Fh=new u,u.qt=this.Fh,this.yi=new R(this),this.J=0,this.Lh=this.Lh.bind(this),r.addEventListener("resize",this.Vh.bind(this),!1),this.Vh(),this.Vt(0),this.yi.create()}S.a.e=b.dt,S.a.o=x.dt,S.a.r=g.dt,Q.prototype={},k.ui=0,k.li=5,k.prototype={_h:function(h,t){var s=t/360*Math.PI*2;this.wi.forEach(function(t){var i=E.Q({x:t.x-h.x,y:t.y-h.y},s);t.x=h.x+i.x,t.y=h.y+i.y,t.angle=s}),this.fi.Ct(h,t)},qh:function(t){if(this.ai=!1,this.wi.forEach(function(t){t.at="red",null===this.pi&&(this.pi=t.rt)},this),-1===this.vi){var i=new B({x:t.x,y:t.y,w:20,h:10,at:"#eeeeee",ht:10,st:5,angle:z.A(0,2*Math.PI)});this.pi.Jt(i);var h=new p({N:i,X:"x",from:t.x,Y:this.fi.x,H:.5,L:p._.Qt}),s=new p({N:i,X:"y",from:t.y,Y:this.fi.y,H:.5,L:p._.Qt,q:function(){this.pi.Kt(i)}.bind(this)}),n=new p({N:i,X:"angle",from:i.angle,Y:i.angle+z.A(-Math.PI,Math.PI),H:.5});u.qt.Ut(h),u.qt.Ut(s),u.qt.Ut(n),-1!==this.di&&this.bi&&this.bi(this)}else this.Mi&&this.Mi(this);this.mi&&this.mi(this)}},N.Uh={Gh:1,Zh:2,Jh:3,Kh:4},N.$h=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:0,y:0},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],N.ts={hs:1,ss:2,ns:3,es:4,rs:5},N.Dh={Ah:1,jh:2,os:3,as:4,us:5},N.Mh={right:1,bottom:2,left:4,top:8},N.cs={width:40,fs:20,ls:20,hi:N.Dh.Ah},N.ws={width:85,fs:20,ls:20,vs:5,hi:N.Dh.jh},N.ds={width:80,fs:20,ls:20,vs:10,hi:N.Dh.Ah},N.ps={width:40,fs:20,ls:20,hi:N.Dh.Ah},N.li=5,N.prototype=t(c.prototype,{uh:function(t,i){var h,s,n,e,r,o,a=t,u=i;for(this.Ti.$t(a*this.gi,u*this.gi),this.Ti.Jt(new B({x:0*this.gi,y:0*this.gi,w:a*this.gi,h:u*this.gi,at:S.u.o})),this.Ti.Jt(new B({x:1*this.gi,y:1*this.gi,w:(a-2)*this.gi,h:(u-2)*this.gi,at:S.u.e})),this.Pi=a,this.Fi=u,h=0;h<a;h+=1)this.ys(h,0,N.Uh.Zh),this.ys(h,u-1,N.Uh.Zh);for(h=0;h<u;h+=1)this.ys(0,h,N.Uh.Zh),this.ys(a-1,h,N.Uh.Zh);for(var c,f,l,w,v,d,p,y=z.D(0,2),m={left:1,top:1,right:a-1,bottom:u-1,ms:y},M=[m],b=[],x=[],g=0,k=0,O=this.Oi,I=this.Ii,A=this.ki;0<M.length&&g<1e4;)if(f=W({},m=M.shift()),l=null,p=0===(y=m.ms)?(d="right","left"):(d="bottom","top"),0===k?(v=W({},m),3,l=W({},m),c=z.D(m[p]+O/2,m[d]-O/2),f[d]=c-this.Ci/2-1,l[p]=c+this.Ci/2+1,v[d]=c+this.Ci/2,v[p]=c-this.Ci/2,v.Ms=!0,b.push(v)):(l=W({},m),c=z.D(m[p]+O/2,m[d]-O/2),f[d]=c,l[p]=c+1),n=f.right-f.left,e=f.bottom-f.top,O<n&&I<e&&A<n*e?(f.ms=0===k?y?0:1:e<n?0:1,M.push(f)):x.push(f),l&&(n=l.right-l.left,e=l.bottom-l.top,O<n&&I<e&&I<n*e?(l.ms=0===k?y?0:1:e<n?0:1,M.push(l)):x.push(l)),g+=1,0===k&&0===M.length)for(k+=1,O=this.Di,I=this.ji,A=this.Ai,h=x.length-1;0<=h;h-=1)n=(f=x[h]).right-f.left,e=f.bottom-f.top,O<n&&I<e&&A<n*e&&(f.ms=e<n?0:1,M.push(f),x.splice(h,1));if(1e4<=g)throw new Error("Infinite loop in partitioning");for(this.Si=b,h=0;h<b.length;h+=1)for(n=(v=b[h]).left;n<v.right;n+=1)for(e=v.top;e<v.bottom;e+=1)this.ys(n,e,N.Uh.Gh,v);var D,j=[];for(h=0;h<x.length;h+=1){for(m=x[h],this.Ti.Jt(new B({x:(m.left-1)*this.gi,y:(m.top-1)*this.gi,w:(m.right-m.left+2)*this.gi,h:(m.bottom-m.top+2)*this.gi,at:S.u.o})),this.Ti.Jt(new B({x:m.left*this.gi,y:m.top*this.gi,w:(m.right-m.left)*this.gi,h:(m.bottom-m.top)*this.gi,at:S.u.r})),n=m.left-1;n<m.right+1;n+=1)this.ys(n,m.top-1,N.Uh.Zh),this.ys(n,m.bottom,N.Uh.Zh);for(e=m.top-1;e<m.bottom+1;e+=1)this.ys(m.left-1,e,N.Uh.Zh),this.ys(m.right,e,N.Uh.Zh);for(w=new Q(this.zi++,m),n=m.left;n<m.right;n+=1)for(e=m.top;e<m.bottom;e+=1)this.ys(n,e,N.Uh.Kh,w);j.push(w)}for(g=0;0<j.length&&g<1e4;){M=g<x.length?b:this.Ri;var C=[];for((D=W({},m=j.shift())).top+=1,D.bottom-=1,D.left-=2,D.right+=2,s=0;s<M.length;s+=1)f=M[s],E.F(D,f)&&C.push(f);for(D.left=m.left+1,D.right=m.right-1,D.top=m.top-2,D.bottom=m.bottom+2,s=0;s<M.length;s+=1)f=M[s],C.indexOf(f)<0&&E.F(D,f)&&C.push(f);if(0<C.length){var P=0;f=z.j(C),D.left=m.left,D.top=m.top,D.right=m.right,D.bottom=m.bottom;var F=!1;D.left-=2,E.F(D,f)&&(F=!0,r=n=f.right,o=(e=z.D(Math.max(m.top,f.top),Math.min(m.bottom,f.bottom)-1))+1,P=N.Mh.left),F||(D.left=m.left,D.top-=2,E.F(D,f)&&(F=!0,r=(n=z.D(Math.max(m.left,f.left),Math.min(m.right,f.right)-1))+1,o=e=f.bottom,P=N.Mh.top)),F||(D.top=m.top,D.right+=2,E.F(D,f)&&(F=!0,r=n=f.left-1,o=(e=z.D(Math.max(m.top,f.top),Math.min(m.bottom,f.bottom)-1))+1,P=N.Mh.right)),F||(r=(n=z.D(Math.max(m.left,f.left),Math.min(m.right,f.right)-1))+1,o=e=f.top-1,P=N.Mh.bottom),this.ys(n,e,N.Uh.Jh),this.ys(r,o,N.Uh.Jh),m.ei=!0,this.Ri.push(m),m.oi||(m.oi=0),f.oi||(f.oi=0),m.oi|=P;var R=P<<2;8<R&&(R>>=4),f.oi|=R}else m.ei=!1,j.push(m);g+=1}if(1e4<=g)throw new Error("Infinite loop in door placements")},fh:function(){var t,i,h,s=this.Si;for(h=0;h<this.Ri.length;h+=1)i=this.Ri[h],t=new B({x:Math.floor((i.left-.5)*this.gi),y:Math.floor((i.top-.5)*this.gi),w:Math.floor((i.right-i.left+1)*this.gi),h:Math.floor((i.bottom-i.top+1)*this.gi)}),this.Jt(t),i.ri=t;var n=new c;for(this.Jt(n),h=0;h<s.length;h+=1)i=s[h],t=new B({x:Math.floor((i.left-.5)*this.gi),y:Math.floor((i.top-.5)*this.gi),w:Math.floor((i.right-i.left+1)*this.gi),h:Math.floor((i.bottom-i.top+1)*this.gi)}),n.Jt(t),i.ri=n},ch:function(){var t,i,h=this.Ri.slice(),s=z.C(h);for(s.hi=N.ts.hs,this.bs(s),this.Ei=s;0<h.length;)t=[],200<(i=((s=z.C(h)).right-s.left)*(s.bottom-s.top))&&t.push(N.ts.ns),100<=i&&t.push(N.ts.rs),i<100&&t.push(N.ts.es),100<=i&&(0===this.Qi.length||Math.random()<.1)&&t.push(N.ts.ss),s.hi=z.j(t),s.hi===N.ts.ss&&this.Qi.push(s),this.bs(s)},xs:function(i,h,t,s){var n,e,r=s.width/2,o=s.fs/2,a=s.ls/2,u=[];if(n=[new T(i-o-a/2,h,o+a/2,r)],s.hi===N.Dh.jh){var c=(s.width-s.vs)/2;u.push(new k(s.hi,i-o,h-c/2-s.vs/2,s.fs,c,s.ls)),u.push(new k(s.hi,i-o,h+c/2+s.vs/2,s.fs,c,s.ls))}else u.push(new k(s.hi,i-o,h,s.fs,s.width,s.ls));return e=t===N.Mh.left?180:t===N.Mh.top?270:t===N.Mh.right?0:90,n.forEach(function(t){t.Ct({x:i,y:h},e)}),u.forEach(function(t){t._h({x:i,y:h},e)}),[n,u]},bs:function(i){var t=null,h={left:i.left*this.gi,top:i.top*this.gi,right:i.right*this.gi,bottom:i.bottom*this.gi};i.oi&N.Mh.left&&(h.left+=1.5*this.gi),i.oi&N.Mh.top&&(h.top+=1.5*this.gi),i.oi&N.Mh.right&&(h.right-=1.5*this.gi),i.oi&N.Mh.bottom&&(h.bottom-=1.5*this.gi);var s=new B({x:h.left,y:h.top,w:h.right-h.left,h:h.bottom-h.top,at:"#007700"});this.Jt(s),i.hi===N.ts.rs?t=this.gs(h):i.hi===N.ts.es?t=this.ks(h,i):i.hi===N.ts.ns?t=this.Os(h,i):i.hi===N.ts.ss&&(t=this.Is(h,i)),t&&(i.ni=t[0],i.si=t[1]),i.si.forEach(function(t){t.ci=i,t.wi.forEach(function(t){this.Jt(t)},this)},this);var n=(i.left+i.right)/2*this.gi,e=(i.top+i.bottom)/2*this.gi,r=new l({ft:["Unknown","Mailroom","Lobby","Bullpen","Private","Open"][i.hi],x:n,y:e,lt:"center",wt:"middle",font:"36px Arial"});this.Jt(r)},gs:function(t,i){var h,s,n=t.right-t.left,e=t.bottom-t.top,r=[],o=[],a=[N.cs],u=e<n?e:n;N.ws.width+100>=u&&a.push(N.ws);var c,f,l,w,v,d=z.j(a),p=d.fs+50,y=d.width/2,m=d.ls/2,M=z.D(0,2);if(e<n){for(l=Math.floor(n/p),w=Math.random()*(n-l*p),f=t.top+y;f+y<t.bottom;){for(h=0;h<l;h+=1)c=t.left+h*p+M*(d.fs+m)+w,s=this.xs(c,f,M?N.Mh.right:N.Mh.left,d),r=r.concat(s[0]),o=o.concat(s[1]);f+=50+d.width}var b=null,x=null;r.forEach(function(t){(!b||t.y<b.y)&&(b=t),(!x||t.y>x.y)&&(x=t)}),b&&x?(v=Math.random()*(e-(x.y+x.T-(b.y-b.T))),r.forEach(function(t){t.y+=v}),o.forEach(function(t){t.wi.forEach(function(t){t.y+=v}),t.fi.y+=v})):console.log("Empty room")}else{for(l=Math.floor(e/p),w=Math.random()*(e-l*p),c=t.left+y;c+y<t.right;){for(h=0;h<l;h+=1)f=t.top+h*p+M*(d.fs+m)+w,s=this.xs(c,f,M?N.Mh.bottom:N.Mh.top,d),r=r.concat(s[0]),o=o.concat(s[1]);c+=50+d.width}var g=null,k=null;r.forEach(function(t){(!g||t.x<g.x)&&(g=t),(!k||t.x>k.x)&&(k=t)}),k&&g?(v=Math.random()*(n-(k.x+k.z-(g.x-g.z))),r.forEach(function(t){t.x+=v}),o.forEach(function(t){t.wi.forEach(function(t){t.x+=v}),t.fi.x+=v})):console.log("Empty room")}return[r,o]},ks:function(t,i){var h,s,n,e,r=this.As(i),o=N.ds,a=o.fs+o.ls/2,u=o.width/2,c=a+o.vs;return r===N.Mh.left||r===N.Mh.right?(n=t.top+u,s=(e=t.bottom-u)<=n?(t.top+t.bottom)/2:z.A(n,e)):(n=t.left+u,h=(e=t.right-u)<=n?(t.left+t.right)/2:z.A(n,e)),r===N.Mh.right?h=t.left+c:r===N.Mh.left?h=t.right-c:s=r===N.Mh.bottom?t.top+c:t.bottom-c,this.xs(h,s,r,o)},Os:function(t,i){var h,s,n,e=t.right-t.left,r=t.bottom-t.top;n=r<e?(h=e,s=r,0):(h=r,s=e,1);var o,a,u,c,f,l,w,v,d,p,y,m,M=Math.floor((s-30)/130),b=Math.floor((h-30)/280),x=(s-30)%130-30,g=(h-30)%280-30,k=Math.floor(x/50),O=Math.floor(g/50),I=[],A=[];0<k&&(M+=1),0<O&&(b+=1);var D=[],j=[];for(o=0;o<M;o+=1)for(l=130*o+30,d=0<k&&o===M-1?k:2,a=0;a<b;a+=1)for(m=new T((f=280*a+30)+50*(p=0<O&&a===b-1?O:5)/2,l+50,50*p/2,2),j.push(m),u=0;u<d;u+=1){for(v=l+50*u,y=u%2==0?N.Mh.top:N.Mh.bottom,c=0;c<p;c+=1)(m=new T((w=f+50*c)+25,v+25,25,25)).Ds=y,D.push(m),m=new T(w,v+25,2,25),j.push(m);m=new T(f+50*p,v+25,2,25),j.push(m)}var C,P,F=(t.left+t.right)/2,R=(t.top+t.bottom)/2,S={x:h/2,y:s/2},E=F-S.x,Q=R-S.y;return C=0===n?[0,180]:[90,270],P=z.j(C),D.forEach(function(t){if(0!==P){t.Ct(S,P);var i,h=Math.round(P/90);for(i=0;i<h;i+=1)t.Ds<<=1,8<t.Ds&&(t.Ds=1)}t.x+=E,t.y+=Q;var s,n,e=z.P(15^t.Ds);n=e===N.Mh.right?(s=t.x+t.z,t.y):e===N.Mh.bottom?(s=t.x,t.y+t.T):e===N.Mh.left?(s=t.x-t.z,t.y):(s=t.x,t.y-t.T);var r=this.xs(s,n,e,N.ps);I=I.concat(r[0]),A=A.concat(r[1])},this),j.forEach(function(t){0!==P&&t.Ct(S,P),t.x+=E,t.y+=Q,I.push(t.Dt()),A.push({ci:null,hi:N.Dh.us,wi:[new B(W(t.Ft(),{at:"black"}))]})}),[I,A]},Is:function(t,i){this.As(i);return[[],[]]},As:function(t){var i,h,s=0,n=[];for(i=1;i<=8&&!s;i<<=1)i===t.oi?s=i:0<(t.oi&i)&&n.push(i);if(s||(5===t.oi?s=z.j([1,4]):10===t.oi&&(s=z.j([2,8]))),!s)for(h=1;h<=8&&!s;h<<=1)i=h,i|=8<h<<1?1:h<<1,(i|=h>>1<1?8:h>>1)===t.oi&&(s=h);return s||(s=z.j(n)),s},js:function(t,i,h,s){var n=null,e=null,r=this.gi/2,o=null,a=!0;switch(h){case N.Uh.Zh:e=new T(t*this.gi+r,i*this.gi+r,r,r),a=!1;break;case N.Uh.Gh:a=!0;break;case N.Uh.Jh:n="#00aa00",a=!0;break;case N.Uh.Kh:a=!0}return n&&(o=new B({x:t*this.gi,y:i*this.gi,w:this.gi,h:this.gi,at:n})),{hi:h,Cs:o,Bi:e,ci:s,Ps:a}},Fs:function(t,i){return this.xi[t]&&this.xi[t][i]?this.xi[t][i]:null},ys:function(t,i,h,s){this.xi[t]||(this.xi[t]={});var n=this.xi[t][i];n&&n.Cs&&this.Kt(n.Cs),n=this.js(t,i,h,s),(this.xi[t][i]=n).Cs&&this.Jt(n.Cs)},Rs:function(t,i){return this.Fs(Math.floor(t/this.gi),Math.floor(i/this.gi))},Ss:function(t,i){var h,s,n=[],e=Math.floor(t/this.gi),r=Math.floor(i/this.gi),o=null,a=N.$h;for(s=0;s<a.length;s+=1)h=a[s],(o=this.Fs(e+h.x,r+h.y))&&n.push(o);return n}}),O.prototype=t(c.prototype,{Es:function(t){this.Zi|=t,this.Qs()},Ws:function(t){this.Zi^=t,this.Qs()},Qs:function(){this.Li.x=0,this.Li.y=0,this.Zi&N.Mh.left&&(this.Li.x-=this.Yi),this.Zi&N.Mh.right&&(this.Li.x+=this.Yi),this.Zi&N.Mh.top&&(this.Li.y-=this.Yi),this.Zi&N.Mh.bottom&&(this.Li.y+=this.Yi)},yh:function(){this.Ni.mt(this.Bi.x,this.Bi.y),this.Bi.mt(this.x,this.y)},Vt:function(t){var i,h,s,n,e,r,o=1,a=0,u=0;s=this.pi.Rs(this.x,this.y),this.Qs(),(this.Li.x||this.Li.y)&&(this.ct.angle=E.R(this.Li));var c=null;for(this.Gi&&s&&s.ci&&s.ci.ni&&(c=s.ci.ni),e=0;e<this.Hi;e+=1){if(o=1,c)for(this.zs(t),h=0;h<c.length;h+=1)(n=this.Ts(c[h],t))<o&&(o=n,a=this._i.x,u=this._i.y);this.x+=this.Li.x*t*o/this.Hi,this.y+=this.Li.y*t*o/this.Hi,o<1&&(r=(this.Li.x*u+this.Li.y*a)*(1-o),this.Li.x=r*u,this.Li.y=r*a),this.yh()}if(o<1&&(r=(this.Li.x*u+this.Li.y*a)*(1-o),this.x+=r*u*t/this.Hi,this.y+=r*a*t/this.Hi,this.yh()),s&&s.ci&&s.ci.si){var f=s.ci.si,l=!1;for(h=0;h<f.length;h+=1)if(f[h].hi===N.Dh.Ah||f[h].hi===N.Dh.jh){var w=f[h];w.ai&&w.fi.It(this.Bi)&&w.qh(this),l=l||w.ai}s.ci.ai=l}if(this.Ui)for(i=this.pi.Ss(this.x,this.y),h=0;h<i.length;h+=1)!(s=i[h]).Ps&&s.Bi&&this.Bs(s.Bi);if((s=this.pi.Rs(this.x,this.y))&&s.ci&&this.qi!==s.ci){var v=this.qi;if(this.qi=s.ci,v&&(!v.Ms||!this.qi.Ms)){v.Ns&&(v.Ns._t(),v.Ns=null);var d=new p({N:v.ri,X:"alpha",from:0,Y:1,H:.5});v.Ns=d,this.yi.Ji.Fh.Ut(d)}this.qi.Ns&&(this.qi.Ns._t(),this.qi.Ns=null),this.qi.ri.alpha=0}},Bs:function(t){var i,h;t.It(this.Bi)&&(i=this.Bi.x-t.x,h=this.Bi.y-t.y,Math.abs(i)>Math.abs(h)?this.x=0<i?t.xt()+this.Bi.z+1:t.Mt()-this.Bi.z-1:this.y=0<h?t.gt()+this.Bi.T+1:t.bt()-this.Bi.T-1,this.yh())},Ts:function(t,i){if(!this.Xi.It(t))return this._i.x=0,this._i.y=0,1;var h,s,n,e,r,o,a,u;n=0<this.Li.x?(h=t.x-t.z-(this.Bi.x+this.Bi.z),t.x+t.z-(this.Bi.x-this.Bi.z)):(h=t.x+t.z-(this.Bi.x-this.Bi.z),t.x-t.z-(this.Bi.x+this.Bi.z)),e=0<this.Li.y?(s=t.y-t.T-(this.Bi.y+this.Bi.T),t.y+t.T-(this.Bi.y-this.Bi.T)):(s=t.y+t.T-(this.Bi.y-this.Bi.T),t.y-t.T-(this.Bi.y+this.Bi.T)),a=0===this.Li.x?(r=-Number.MAX_VALUE,Number.MAX_VALUE):(r=h/(this.Li.x*i/this.Hi),n/(this.Li.x*i/this.Hi)),u=0===this.Li.y?(o=-Number.MAX_VALUE,Number.MAX_VALUE):(o=s/(this.Li.y*i/this.Hi),e/(this.Li.y*i/this.Hi));var c=Math.max(r,o);return Math.min(a,u)<c||r<0&&o<0||1<r||1<o?(this._i.x=0,this._i.y=0,1):(o<r?(this._i.x=h<0?1:-1,this._i.y=0):(this._i.x=0,this._i.y=s<0?1:-1),c)},zs:function(t){var i=this.Li.x*t/this.Hi,h=this.Li.y*t/this.Hi,s=0<this.Li.x?this.Bi.x-this.Bi.z:this.Bi.x-this.Bi.z+i,n=0<this.Li.y?this.Bi.y-this.Bi.T:this.Bi.y-this.Bi.T+h,e=0<this.Li.x?this.Bi.x+this.Bi.z+i:this.Bi.x+this.Bi.z,r=0<this.Li.y?this.Bi.y+this.Bi.T+h:this.Bi.y+this.Bi.T;this.Xi.x=(s+e)/2,this.Xi.y=(n+r)/2,this.Xi.z=(e-s)/2,this.Xi.T=(r-n)/2}}),I.prototype=t(c.prototype,{create:function(){},v:function(){},Oh:function(t){this.Ki.push(t)},Vt:function(t){for(var i=0;i<this.Ki.length;i+=1)this.Ki[i](t)},Gt:function(t){this.Zt(t)}}),A.prototype=t(I.prototype,{gh:function(t){this.bh[t]&&this.ph.Es(this.bh[t])},kh:function(t){this.bh[t]&&this.ph.Ws(this.bh[t])},v:function(){this.xh.v()},Ih:function(t){this.ph.Vt(t),this.dh||(this.pi.x=Math.floor(w.width/2-this.ph.x*this.pi.$),this.pi.y=Math.floor(w.height/2-this.ph.y*this.pi.tt)),this.Xs()},Xs:function(){var t,i,h,s,n,e;for(t=0;t<this.$i.length;t+=1)(i=this.$i[t]).ai&&(e=this.sh[i.ii],this.ph.qi!==i?(e.it=!0,h=(i.left+i.right)/2*this.pi.gi,s=(i.top+i.bottom)/2*this.pi.gi,n=Math.atan2(s-this.ph.y,h-this.ph.x),e.angle=n):e.it=!1)},vh:function(){var t,i,h,s=this.pi.Ri.filter(function(t){return t.si&&t.si.length&&t.si.some(function(t){return t.hi===N.Dh.Ah||t.hi===N.Dh.jh})}),n=z.D(w.minMailableRooms,Math.max(w.minMailableRooms+1,Math.floor(s.length*w.maxMailableRoomRate))),e=[];for(t=0;t<n;t+=1)i=z.C(s),h=C("white"),this.lh.Jt(h),this.sh[i.ii]=h,i.ai=!0,e.push(i);var r=e.reduce(D,[]),o=s.reduce(D,[]),a=z.D(w.minMissingPeople,w.maxMissingPeople+1);a>r.length&&(a=r.length);var u,c,f=[],l=[];for(t=0;t<a;t+=1)u=z.C(r),c=z.C(o),u.vi=c.ii,c.di=u.ii,f.push(u),l.push(c),u.Mi=this.Ys.bind(this),c.bi=this.Hs.bind(this),c.mi=this.Ls.bind(this);r.forEach(j),f.forEach(j),l.forEach(j),r.forEach(function(t){t.mi=this.Ls.bind(this)},this),this.$i=e,this.th=r,this.ih=f,this.hh=l,this.Vs=r.concat(l),this.wh.ft="Mail left: "+this.Vs.length,this.th.forEach(function(t){t.wi.forEach(function(t){t.at="white"})}),this.ih.forEach(function(t){t.wi.forEach(function(t){t.at="blue"})}),this.hh.forEach(function(t){t.wi.forEach(function(t){t.at="gray"})})},Ls:function(t){console.log("delivered to",t.ii);var i=this.Vs.reduce(function(t,i){return t+(i.ai?1:0)},0);this.wh.ft="Mail left: "+i,i<=0&&console.log("finished!")},Ys:function(i){var t=this.hh.find(function(t){return t.ii===i.vi});if(t){if(t.ai&&-1===this.$i.indexOf(t.ci)){t.ci.ai=!0,this.$i.push(t.ci);var h=C("blue");this.sh[t.ci.ii]=h,this.lh.Jt(h)}}else console.log("desk "+i.vi+" not found")},Hs:function(i){var t=this.ih.find(function(t){return t.ii===i.di});t&&t.ai&&t.qh(this.ph)}}),P.prototype=t(I.prototype,{v:function(){this.Ph.forEach(function(t){t._s()}),clearInterval(this.Sh),this.xh.v()},Ih:function(t){this.J+=t;var i=this.J%this.Ch/this.Ch;this.s.$=1+.05*Math.cos(i*Math.PI*2),this.s.tt=1+.05*Math.sin(i*Math.PI*2)}}),F.prototype={Lt:function(){this.Wh=!0,setTimeout(this.qs.bind(this),1e3*this.zh)},qs:function(){if(!this.Wh)return!1;var t,i;t=new p({N:this.Bh,X:"y",from:5,Y:15,H:.5,L:p._.Qt,q:function(){this.Fh.Ut(i)}.bind(this)}),i=new p({N:this.Bh,X:"y",from:15,Y:5,H:.5,L:p._.Qt,q:this.qs.bind(this)}),this.Fh.Ut(t)},_s:function(){this.Wh=!1,this.K.forEach(function(t){t._t()})}},R.prototype=t(I.prototype,{create:function(){Object.entries(S.i).forEach(function(t){var i=new Image;i.onload=this.Us.bind(this),i.src=t[1],this.i.push(i),S.a[t[0]]=i},this)},Us:function(t){if(!this.Nh){var i=this.i.reduce(function(t,i){return(i.complete?1:0)+(t||0)},0);this.Xh.ft=Math.floor(i/this.i.length*100)+"%",i>=this.i.length&&this.Gs()}},Gs:function(){this.Nh||(Object.entries(S.n).forEach(function(t){S.u[t[0]]=this.Ji.pt.createPattern(S.a[t[0]],t[1])},this),this.Nh=!0,this.Ji.Qh(new P(this.Ji)))}}),X.prototype={Vh:function(){this.Lh(),setTimeout(function(){this.Lh()}.bind(this),100)},Lh:function(){var t,i,h=r.getComputedStyle(o.c("root")),s=parseInt(h.width,10),n=parseInt(h.height,10),e=this.dt.width/this.dt.height;s/n<e?i=(t=s)/e:t=(i=n)*e,this.dt.style.width=Math.floor(t)+"px",this.dt.style.height=Math.floor(i)+"px",this.dt.style.position="absolute",this.dt.style.left="50%",this.dt.style.top="50%",this.dt.style.marginLeft=Math.floor(-t/2)+"px",this.dt.style.marginTop=Math.floor(-i/2)+"px"},Qh:function(t){this.yi&&this.yi.v(),(this.yi=t).create()},Vt:function(t){var i=(t-this.J)/1e3;0<i&&(.2<i&&(i=.2),this.yi.Vt(i),this.yi.Gt(this.pt),this.Fh.Vt(i),this.J=t),requestAnimationFrame(this.Vt)}},r.game=new X}(window,document);