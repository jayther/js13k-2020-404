!function(o,i){var r=640,e=360,n={t:{i:"robot_3Dblue.png"},h:{}};function H(t,i){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(h[r]=n[r])}return h}function t(){return H.apply(this,[{}].concat(Array.prototype.slice.call(arguments)))}var h,u=(h={},{s:function(t){return h[t]||(h[t]=i.getElementById(t)),h[t]},create:function(t){return i.createElement(t)}});function a(t,i,h){var s={n:t,r:!1,o:i,e:h,u:function(t){t.keyCode===s.n&&(!s.r&&s.o&&s.o(),s.r=!0),t.preventDefault()},a:function(t){t.keyCode===s.n&&(s.r&&s.e&&s.e(),s.r=!1),t.preventDefault()},c:function(){o.removeEventListener("keydown",s.u,!1),o.removeEventListener("keyup",s.a,!1)}};return o.addEventListener("keydown",s.u,!1),o.addEventListener("keyup",s.a,!1),s}a.keys={f:65,l:87,d:83,w:68,left:37,v:38,right:39,p:40,M:32,y:13};var W=null;W={m:function(t,i){return t+Math.random()*(i-t)},b:function(t,i){return Math.floor(W.m(t,i))},x:function(t){return t[W.b(0,t.length)]}};var z=function(t,i){return t.left<i.right&&t.right>i.left&&t.top<i.bottom&&t.bottom>i.top},c=function(t){return Math.atan2(t.g,t.I)};function f(t,i,h,s){this.I=t||0,this.g=i||0,this.C=h||0,this.O=s||0}function l(t){this.k=H({Q:null,j:null,from:0,A:1,D:1,H:l.z.W,F:null},t||{}),this.P=-1,this.X=-1,this.Y=!1}function s(){this._=0,this.B=[]}function d(t){var i=H({I:0,g:0,S:1,T:1,q:0,G:!0,alpha:1,L:0,R:0},t||{});this.I=i.I,this.g=i.g,this.S=i.S,this.T=i.T,this.q=i.q,this.G=i.G,this.alpha=i.alpha,this.L=i.L,this.R=i.R}function F(t){d.apply(this,arguments),this.J=[]}function P(t){d.apply(this,arguments);var i=H({l:0,K:0,N:"black"},t||{});this.l=i.l,this.K=i.K,this.N=i.N}function w(t){d.apply(this,arguments);var i=H({l:0,K:0,U:null},t||{});this.l=i.l,this.K=i.K,this.U=i.U,this.l&&!i.S&&(this.S=this.l/this.U.width),this.K&&!i.T&&(this.T=this.K/this.U.height)}function v(t){F.apply(this,arguments);var i=H({l:100,K:100},t||{});this.V=u.create("canvas"),this.V.width=i.l,this.V.height=i.K,this.Z=this.V.getContext("2d")}function X(){F.apply(this,arguments),this.$={},this.tt=20,this.it=1e3,this.ht=20,this.st=20,this.nt=100,this.rt=10,this.ot=10,this.et=2,this.ut=0,this.at=0,this.ct=[],this.ft=[],this.lt=new v,this.dt(this.lt)}function p(t,i){F.call(this,i),this.wt=t;var h=H({vt:null},i||{});this.pt=new f(0,0,10,10),this.Mt={I:0,g:0},this.vt=h.vt,this.yt=null;var s=new w({U:n.h.i,l:19,K:20,L:10,R:10});this.dt(s),this.U=s}function M(t,i){F.call(this),this.mt=t,this.k=i,this.bt=[]}function y(){M.apply(this,arguments),this.xt={gt:50,It:60,Ct:50,Ot:60},this.ut=W.b(this.xt.gt,this.xt.It),this.at=W.b(this.xt.Ct,this.xt.Ot);var t=new P({l:r,K:e,N:"#333333"});this.dt(t),this.vt=new X,this.dt(this.vt),this.vt.kt(this.ut,this.at),this.vt.S=2;this.vt.T=2;var i=200,h=this.Qt=new p(this,{vt:this.vt});this.vt.dt(this.Qt);var s=W.x(this.vt.ct);this.Qt.I=(s.left+s.right)/2*this.vt.tt,this.Qt.g=(s.top+s.bottom)/2*this.vt.tt,this.Qt.jt();var n=this.Qt.Mt;this.keys=[],this.At=a(a.keys.f,function(){n.I+=-i},function(){n.I-=-i}),this.keys.push(this.At),this.Dt=a(a.keys.d,function(){n.g+=i},function(){n.g-=i}),this.keys.push(this.Dt),this.Et=a(a.keys.w,function(){n.I+=i},function(){n.I-=i}),this.keys.push(this.Et),this.Ht=a(a.keys.l,function(){n.g+=-i},function(){n.g-=-i}),this.keys.push(this.Ht),this.Wt(this.Qt.zt.bind(this.Qt)),this.Wt(function(t){this.vt.I=Math.floor(r/2-h.I*this.vt.S),this.vt.g=Math.floor(e/2-h.g*this.vt.T)}.bind(this))}function m(){M.apply(this,arguments),this.t=[],this.Ft=!1}function b(){this.zt=this.zt.bind(this),this.Pt=u.s("root");var t=u.create("canvas");t.width=r,t.height=e,this.Pt.appendChild(t),this.V=t,this.Z=t.getContext("2d"),this.Xt=new s,this.wt=new m(this),this._=0,this.Yt=this.Yt.bind(this),o.addEventListener("resize",this._t.bind(this),!1),this._t(),this.zt(0),this.wt.create()}f.Bt=function(t){return new f((t.left+t.right)/2,(t.top+t.bottom)/2,(t.right-t.right)/2,(t.bottom-t.top)/2)},(f.prototype={}).St=function(t,i){this.I=t||0,this.g=i||0},f.prototype.Tt=function(){return this.I-this.C},f.prototype.qt=function(){return this.g-this.O},f.prototype.Gt=function(){return this.I+this.C},f.prototype.Lt=function(){return this.g+this.O},f.prototype.Rt=function(){return 2*this.C},f.prototype.Jt=function(){return 2*this.O},f.prototype.Kt=function(t){return Math.abs(this.I-t.I)<this.C+t.C&&Math.abs(this.g-t.g)<this.O+t.O},f.prototype.Nt=function(t,i){return Math.abs(this.I-t)<this.C&&Math.abs(this.g-i)<this.O},l.z={W:function(t){return t},Ut:function(t){return t*t},Vt:function(t){return t*(2-t)},Zt:function(t){return t<.5?2*t*t:(4-2*t)*t-1},$t:function(t){return t*t*t},ti:function(t){return--t*t*t+1},ii:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},hi:function(t){return t*t*t*t},si:function(t){return 1- --t*t*t*t},ni:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},ri:function(t){return t*t*t*t*t},oi:function(t){return 1+--t*t*t*t*t},ei:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},l.prototype={ui:function(t){this.P=t,this.X=t+this.k.D},zt:function(t){if(this.k.Q&&this.k.j){var i=(t-this.P)/this.k.D;1<i&&(i=1);var h=this.k.H(i),s=this.k.from+(this.k.A-this.k.from)*h;this.k.Q[this.k.j]=s}},ai:function(){this.Y=!0}},s.prototype={ci:function(t){t.ui(this._),this.B.push(t)},zt:function(t){var i,h,s;for(i=0;i<this.B.length;i+=1)s=!1,(h=this.B[i]).Y||h.zt(this._),h.Y?s=!0:this._>=h.X&&(h.k.F&&h.k.F(),s=!0),s&&(this.B.splice(i,1),i-=1);this._+=t}},F.prototype=t(d.prototype={fi:function(t){this.G&&.01<=this.alpha&&(t.save(),(this.I||this.g)&&t.translate(this.I,this.g),1===this.S&&1===this.T||t.scale(this.S,this.T),this.q&&t.rotate(this.q),(this.L||this.R)&&t.translate(-this.L/this.S,-this.R/this.T),this.alpha<1&&(t.globalAlpha*=this.alpha),this.li(t),t.restore())},li:function(t){}},{dt:function(t){return this.J.push(t),this},di:function(t){var i=this.J.indexOf(t);return 0<=i&&this.J.splice(i,1),this},li:function(t){for(var i=0;i<this.J.length;i+=1)this.J[i].fi(t)}}),P.prototype=t(d.prototype,{li:function(t){t.fillStyle=this.N,t.fillRect(0,0,this.l,this.K)}}),w.prototype=t(d.prototype,{li:function(t){t.drawImage(this.U,0,0)}}),v.prototype=t(F.prototype,{wi:function(t,i){this.V.width=t,this.V.height=i},dt:function(t){F.prototype.dt.apply(this,arguments),this.vi()},di:function(t){F.prototype.di.apply(this,arguments),this.vi()},vi:function(){this.Z.clearRect(0,0,this.V.width,this.V.height);for(var t=0;t<this.J.length;t+=1)this.J[t].fi(this.Z)},li:function(t){t.drawImage(this.V,0,0)}}),X.pi={Mi:1,yi:2,mi:3,bi:4},X.xi=[{I:1,g:0},{I:0,g:1},{I:-1,g:0},{I:0,g:-1},{I:0,g:0},{I:1,g:1},{I:-1,g:1},{I:-1,g:-1},{I:1,g:-1}],X.prototype=t(F.prototype,{kt:function(t,i){var h,s,n,r,o,e,u=t,a=i;for(this.lt.wi(u*this.tt,a*this.tt),this.lt.dt(new P({I:0*this.tt,g:0*this.tt,l:u*this.tt,K:a*this.tt,N:"#000000"})),this.lt.dt(new P({I:1*this.tt,g:1*this.tt,l:(u-2)*this.tt,K:(a-2)*this.tt,N:"#656565"})),this.ut=u,this.at=a,h=0;h<u;h+=1)this.gi(h,0,X.pi.yi),this.gi(h,a-1,X.pi.yi);for(h=0;h<a;h+=1)this.gi(0,h,X.pi.yi),this.gi(u-1,h,X.pi.yi);for(var c,f,l,d,w,v,p=W.b(0,2),M={left:1,top:1,right:u-1,bottom:a-1,Ii:p},y=[M],m=[],b=[],x=0,g=0,I=this.ht,C=this.st,O=this.it;0<y.length&&x<1e4;)if(f=H({},M=y.shift()),l=null,v=0===(p=M.Ii)?(w="right","left"):(w="bottom","top"),0===g?(d=H({},M),3,l=H({},M),c=W.b(M[v]+I/2,M[w]-I/2),f[w]=c-this.et/2-1,l[v]=c+this.et/2+1,d[w]=c+this.et/2,d[v]=c-this.et/2,d.Ci=!0,m.push(d)):(l=H({},M),c=W.b(M[v]+I/2,M[w]-I/2),f[w]=c,l[v]=c+1),n=f.right-f.left,r=f.bottom-f.top,I<n&&C<r&&O<n*r?(f.Ii=0===g?p?0:1:r<n?0:1,y.push(f)):b.push(f),l&&(n=l.right-l.left,r=l.bottom-l.top,I<n&&C<r&&C<n*r?(l.Ii=0===g?p?0:1:r<n?0:1,y.push(l)):b.push(l)),x+=1,0===g&&0===y.length)for(g+=1,I=this.rt,C=this.ot,O=this.nt,h=b.length-1;0<=h;h-=1)n=(f=b[h]).right-f.left,r=f.bottom-f.top,I<n&&C<r&&O<n*r&&(f.Ii=r<n?0:1,y.push(f),b.splice(h,1));if(1e4<=x)throw new Error("Infinite loop in partitioning");for(this.ft=m,h=0;h<m.length;h+=1)for(n=(d=m[h]).left;n<d.right;n+=1)for(r=d.top;r<d.bottom;r+=1)this.gi(n,r,X.pi.Mi,d);var k,Q,j=[];for(h=0;h<b.length;h+=1){for(M=b[h],this.lt.dt(new P({I:(M.left-1)*this.tt,g:(M.top-1)*this.tt,l:(M.right-M.left+2)*this.tt,K:(M.bottom-M.top+2)*this.tt,N:"#000000"})),this.lt.dt(new P({I:M.left*this.tt,g:M.top*this.tt,l:(M.right-M.left)*this.tt,K:(M.bottom-M.top)*this.tt,N:"#999999"})),n=M.left-1;n<M.right+1;n+=1)this.gi(n,M.top-1,X.pi.yi),this.gi(n,M.bottom,X.pi.yi);for(r=M.top-1;r<M.bottom+1;r+=1)this.gi(M.left-1,r,X.pi.yi),this.gi(M.right,r,X.pi.yi);for(n=M.left;n<M.right;n+=1)for(r=M.top;r<M.bottom;r+=1)this.gi(n,r,X.pi.bi,M);M.Oi=!1,j.push(M)}for(x=0;0<j.length&&x<1e4;){y=x<b.length?m:this.ct;var A=[];for((k=H({},M=j.shift())).top+=1,k.bottom-=1,k.left-=2,k.right+=2,s=0;s<y.length;s+=1)f=y[s],z(k,f)&&A.push(f);for(k.left=M.left+1,k.right=M.right-1,k.top=M.top-2,k.bottom=M.bottom+2,s=0;s<y.length;s+=1)f=y[s],A.indexOf(f)<0&&z(k,f)&&A.push(f);if(0<A.length){f=W.x(A),k.left=M.left,k.top=M.top,k.right=M.right,k.bottom=M.bottom;var D=!1;k.left-=2,z(k,f)&&(D=!0,o=n=f.right,e=(r=W.b(Math.max(M.top,f.top),Math.min(M.bottom,f.bottom)-1))+1),D||(k.left=M.left,k.top-=2,z(k,f)&&(D=!0,o=(n=W.b(Math.max(M.left,f.left),Math.min(M.right,f.right)-1))+1,e=r=f.bottom)),D||(k.top=M.top,k.right+=2,z(k,f)&&(D=!0,o=n=f.left-1,e=(r=W.b(Math.max(M.top,f.top),Math.min(M.bottom,f.bottom)-1))+1)),D||(o=(n=W.b(Math.max(M.left,f.left),Math.min(M.right,f.right)-1))+1,e=r=f.top-1),this.gi(n,r,X.pi.mi),this.gi(o,e,X.pi.mi),M.Oi=!0,this.ct.push(M)}else M.Oi=!1,j.push(M);x+=1}if(1e4<=x)throw new Error("Infinite loop in door placements");for(h=0;h<this.ct.length;h+=1)M=this.ct[h],Q=new P({I:Math.floor((M.left-.5)*this.tt),g:Math.floor((M.top-.5)*this.tt),l:Math.floor((M.right-M.left+1)*this.tt),K:Math.floor((M.bottom-M.top+1)*this.tt)}),this.dt(Q),M.ki=Q;var E=new F;for(this.dt(E),h=0;h<m.length;h+=1)M=m[h],Q=new P({I:Math.floor((M.left-.5)*this.tt),g:Math.floor((M.top-.5)*this.tt),l:Math.floor((M.right-M.left+1)*this.tt),K:Math.floor((M.bottom-M.top+1)*this.tt)}),E.dt(Q),M.ki=E},Qi:function(t,i,h,s){var n=null,r=null,o=this.tt/2,e=null,u=!0;switch(h){case X.pi.yi:r=new f(t*this.tt+o,i*this.tt+o,o,o),u=!1;break;case X.pi.Mi:u=!0;break;case X.pi.mi:n="#00aa00",u=!0;break;case X.pi.bi:u=!0}return n&&(e=new P({I:t*this.tt,g:i*this.tt,l:this.tt,K:this.tt,N:n})),{ji:h,Ai:e,pt:r,Di:s,Ei:u}},Hi:function(t,i){return this.$[t]&&this.$[t][i]?this.$[t][i]:null},gi:function(t,i,h,s){this.$[t]||(this.$[t]={});var n=this.$[t][i];n&&n.Ai&&this.di(n.Ai),n=this.Qi(t,i,h,s),(this.$[t][i]=n).Ai&&this.dt(n.Ai)},Wi:function(t,i){return this.Hi(Math.floor(t/this.tt),Math.floor(i/this.tt))},zi:function(t,i){var h,s,n=[],r=Math.floor(t/this.tt),o=Math.floor(i/this.tt),e=null,u=X.xi;for(s=0;s<u.length;s+=1)h=u[s],(e=this.Hi(r+h.I,o+h.g))&&n.push(e);return n}}),p.prototype=t(F.prototype,{jt:function(){this.pt.St(this.I,this.g)},zt:function(t){(this.Mt.I||this.Mt.g)&&(this.U.q=c(this.Mt)),this.I+=this.Mt.I*t,this.g+=this.Mt.g*t,this.jt();var i,h,s,n,r=this.vt.zi(this.I,this.g);for(i=0;i<r.length;i+=1)!(h=r[i]).Ei&&h.pt&&h.pt.Kt(this.pt)&&(s=this.pt.I-h.pt.I,n=this.pt.g-h.pt.g,Math.abs(s)>Math.abs(n)?this.I=0<s?h.pt.Gt()+this.pt.C:h.pt.Tt()-this.pt.C:this.g=0<n?h.pt.Lt()+this.pt.O:h.pt.qt()-this.pt.O,this.jt());if((h=this.vt.Wi(this.I,this.g))&&h.Di&&this.yt!==h.Di){var o=this.yt;if(this.yt=h.Di,o&&(!o.Ci||!this.yt.Ci)){o.Fi&&(o.Fi.ai(),o.Fi=null);var e=new l({Q:o.ki,j:"alpha",from:0,A:1,D:.5});o.Fi=e,this.wt.mt.Xt.ci(e)}this.yt.Fi&&(this.yt.Fi.ai(),this.yt.Fi=null),this.yt.ki.alpha=0}}}),M.prototype=t(F.prototype,{create:function(){},c:function(){},Wt:function(t){this.bt.push(t)},zt:function(t){for(var i=0;i<this.bt.length;i+=1)this.bt[i](t)},fi:function(t){this.li(t)}}),y.prototype=t(M.prototype,{c:function(){this.keys.forEach(function(t){t.c()})}}),m.prototype=t(M.prototype,{create:function(){Object.entries(n.t).forEach(function(t){var i=new Image;i.onload=this.Pi.bind(this),i.src=t[1],this.t.push(i),n.h[t[0]]=i},this)},Pi:function(t){this.Ft||this.t.reduce(function(t,i){return(i.complete?1:0)+(t||0)},0)>=this.t.length&&(this.Ft=!0,this.mt.Xi(new y(this.mt)))}}),b.prototype={_t:function(){this.Yt(),setTimeout(function(){this.Yt()}.bind(this),100)},Yt:function(){var t,i,h=o.getComputedStyle(u.s("root")),s=parseInt(h.width,10),n=parseInt(h.height,10),r=this.V.width/this.V.height;s/n<r?i=(t=s)/r:t=(i=n)*r,this.V.style.width=Math.floor(t)+"px",this.V.style.height=Math.floor(i)+"px",this.V.style.position="absolute",this.V.style.left="50%",this.V.style.top="50%",this.V.style.marginLeft=Math.floor(-t/2)+"px",this.V.style.marginTop=Math.floor(-i/2)+"px"},Xi:function(t){this.wt&&this.wt.c(),(this.wt=t).create()},zt:function(t){var i=(t-this._)/1e3;0<i&&(.2<i&&(i=.2),this.wt.zt(i),this.wt.fi(this.Z),this.Xt.zt(i),this._=t),requestAnimationFrame(this.zt)}},o.game=new b}(window,document);