!function(e,i){var r=640,o=360,c=2,l=.25,p=5,d=10,P={t:{i:"robot_3Dblue.png",h:"grassCenter.png",s:"stoneCenter.png",n:"roofGreyMid.png"},r:{h:"repeat",s:"repeat",n:"repeat"},e:{},o:{}};function z(t,i){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(h[r]=n[r])}return h}function t(){return z.apply(this,[{}].concat(Array.prototype.slice.call(arguments)))}var h,u=(h={},{u:function(t){return h[t]||(h[t]=i.getElementById(t)),h[t]},create:function(t){return i.createElement(t)}});function a(t,i,h){var s={a:t,f:!1,c:i,l:h,p:function(t){t.keyCode===s.a&&(!s.f&&s.c&&s.c(),s.f=!0),t.preventDefault()},d:function(t){t.keyCode===s.a&&(s.f&&s.l&&s.l(),s.f=!1),t.preventDefault()},v:function(){e.removeEventListener("keydown",s.p,!1),e.removeEventListener("keyup",s.d,!1)}};return e.addEventListener("keydown",s.p,!1),e.addEventListener("keyup",s.d,!1),s}a.keys={w:65,M:87,m:83,g:68,left:37,b:38,right:39,I:40,k:32,C:13};var E=null;E={O:function(t,i){return t+Math.random()*(i-t)},j:function(t,i){return Math.floor(E.O(t,i))},Q:function(t){return t[E.j(0,t.length)]},A:function(t){var i=E.j(0,t.length),h=t[i];return t.splice(i,1),h}};var R=function(t,i){return t.left<i.right&&t.right>i.left&&t.top<i.bottom&&t.bottom>i.top},v=function(t){return Math.atan2(t.y,t.x)};function C(t,i,h,s){this.x=t||0,this.y=i||0,this.D=h||0,this.F=s||0}function w(t){this.P=z({z:null,R:null,from:0,B:1,H:1,S:w.X.W,Y:null},t||{}),this.L=-1,this.T=-1,this._=!1}function s(){this.G=0,this.q=[]}function n(t){var i=z({x:0,y:0,U:1,J:1,angle:0,K:!0,alpha:1,N:0,V:0},t||{});this.x=i.x,this.y=i.y,this.U=i.U,this.J=i.J,this.angle=i.angle,this.K=i.K,this.alpha=i.alpha,this.N=i.N,this.V=i.V}function f(t){n.apply(this,arguments),this.Z=[]}function B(t){n.apply(this,arguments);var i=z({M:0,$:0,tt:"black"},t||{});this.M=i.M,this.$=i.$,this.tt=i.tt}function y(t){n.apply(this,arguments);var i=z({M:0,$:0,it:null},t||{});this.M=i.M,this.$=i.$,this.it=i.it,this.M&&!i.U&&(this.U=this.M/this.it.width),this.$&&!i.J&&(this.J=this.$/this.it.height)}function O(t){n.apply(this,arguments);var i=z({ht:"",st:"left",nt:"top",font:null,tt:"black"},t||{});this.tt=i.tt,this.ht=i.ht,this.st=i.st,this.nt=i.nt,this.font=i.font}function M(t){f.apply(this,arguments);var i=z({M:100,$:100},t||{});this.rt=u.create("canvas"),this.rt.width=i.M,this.rt.height=i.$,this.et=this.rt.getContext("2d")}function H(){f.apply(this,arguments),this.ot={},this.ut=20,this.at=1e3,this.ft=20,this.ct=20,this.lt=100,this.pt=12,this.dt=12,this.vt=2,this.wt=0,this.yt=0,this.Mt=[],this.mt=[],this.gt=null,this.bt=[],this.xt=0,this.It=new M,this.kt(this.It)}function m(t,i){f.call(this,i),this.Ct=t;var h=z({Ot:null},i||{});this.jt=new C(0,0,10,10),this.Qt={x:0,y:0},this.Ot=h.Ot,this.At=null;var s=new y({it:P.e.i,M:19,$:20,N:10,V:10});this.kt(s),this.it=s,this.Dt=!0,this.Ft=!0}function g(t,i){f.call(this),this.Pt=t,this.P=i,this.zt=[]}function b(){g.apply(this,arguments),this.Et=[],this.Rt=[],this.Bt=[],this.Ht=[],this.St={Wt:60,Xt:70,Yt:60,Lt:70},this.wt=E.j(this.St.Wt,this.St.Xt),this.yt=E.j(this.St.Yt,this.St.Lt);var t=new B({M:r,$:o,tt:"#333333"});this.kt(t),this.Ot=new H,this.kt(this.Ot),this.Ot.Tt(this.wt,this.yt),this.Ot._t(),this.Ot.Gt(),this.Ot.U=2,this.Ot.J=2,this.qt();var i=200,h=this.Ut=new m(this,{Ot:this.Ot});this.Ot.kt(this.Ut);var s=this.Ot.gt;this.Ut.x=(s.left+s.right)/2*this.Ot.ut,this.Ut.y=(s.top+s.bottom)/2*this.Ot.ut,this.Ut.Jt();var n=this.Ut.Qt;this.keys=[],this.Kt=a(a.keys.w,function(){n.x+=-i},function(){n.x-=-i}),this.keys.push(this.Kt),this.Nt=a(a.keys.m,function(){n.y+=i},function(){n.y-=i}),this.keys.push(this.Nt),this.Vt=a(a.keys.g,function(){n.x+=i},function(){n.x-=i}),this.keys.push(this.Vt),this.Zt=a(a.keys.M,function(){n.y+=-i},function(){n.y-=-i}),this.keys.push(this.Zt),this.$t(this.Ut.ti.bind(this.Ut)),this.$t(function(t){this.Ot.x=Math.floor(r/2-h.x*this.Ot.U),this.Ot.y=Math.floor(o/2-h.y*this.Ot.J)}.bind(this))}function x(t,i){return t.concat(i.ii.filter(function(t){return t.hi==H.ni.si}))}function I(t){t.ri=!0;var i=t.jt.ei();i.oi(5),t.ui=i}function k(){g.apply(this,arguments),this.t=[],this.ai=!1}function j(){this.ti=this.ti.bind(this),this.fi=u.u("root");var t=u.create("canvas");t.width=r,t.height=o,this.fi.appendChild(t),this.rt=t,this.et=t.getContext("2d"),this.et.font="16px Arial",this.ci=new s,this.Ct=new k(this),this.G=0,this.li=this.li.bind(this),e.addEventListener("resize",this.pi.bind(this),!1),this.pi(),this.ti(0),this.Ct.create()}C.di=function(t){return new C((t.left+t.right)/2,(t.top+t.bottom)/2,(t.right-t.left)/2,(t.bottom-t.top)/2)},(C.prototype={}).vi=function(t,i){this.x=t||0,this.y=i||0},C.prototype.wi=function(){return this.x-this.D},C.prototype.yi=function(){return this.y-this.F},C.prototype.Mi=function(){return this.x+this.D},C.prototype.mi=function(){return this.y+this.F},C.prototype.gi=function(){return 2*this.D},C.prototype.bi=function(){return 2*this.F},C.prototype.xi=function(t){return Math.abs(this.x-t.x)<this.D+t.D&&Math.abs(this.y-t.y)<this.F+t.F},C.prototype.Ii=function(t,i){return Math.abs(this.x-t)<this.D&&Math.abs(this.y-i)<this.F},C.prototype.ei=function(){return new C(this.x,this.y,this.D,this.F)},C.prototype.oi=function(t){return this.D+=t,this.F+=t,this},w.X={W:function(t){return t},ki:function(t){return t*t},Ci:function(t){return t*(2-t)},Oi:function(t){return t<.5?2*t*t:(4-2*t)*t-1},ji:function(t){return t*t*t},Qi:function(t){return--t*t*t+1},Ai:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Di:function(t){return t*t*t*t},Fi:function(t){return 1- --t*t*t*t},Pi:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},zi:function(t){return t*t*t*t*t},Ei:function(t){return 1+--t*t*t*t*t},Ri:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},w.prototype={Bi:function(t){this.L=t,this.T=t+this.P.H},ti:function(t){if(this.P.z&&this.P.R){var i=(t-this.L)/this.P.H;1<i&&(i=1);var h=this.P.S(i),s=this.P.from+(this.P.B-this.P.from)*h;this.P.z[this.P.R]=s}},Hi:function(){this._=!0}},s.prototype={Si:function(t){t.Bi(this.G),this.q.push(t)},ti:function(t){var i,h,s;for(i=0;i<this.q.length;i+=1)s=!1,(h=this.q[i])._||h.ti(this.G),h._?s=!0:this.G>=h.T&&(h.P.Y&&h.P.Y(),s=!0),s&&(this.q.splice(i,1),i-=1);this.G+=t}},f.prototype=t(n.prototype={Wi:function(t){this.K&&.01<=this.alpha&&(t.save(),(this.x||this.y)&&t.translate(this.x,this.y),1===this.U&&1===this.J||t.scale(this.U,this.J),this.angle&&t.rotate(this.angle),(this.N||this.V)&&t.translate(-this.N/this.U,-this.V/this.J),this.alpha<1&&(t.globalAlpha*=this.alpha),this.Xi(t),t.restore())},Xi:function(t){}},{kt:function(t){return this.Z.push(t),this},Yi:function(t){var i=this.Z.indexOf(t);return 0<=i&&this.Z.splice(i,1),this},Xi:function(t){for(var i=0;i<this.Z.length;i+=1)this.Z[i].Wi(t)}}),B.prototype=t(n.prototype,{Xi:function(t){t.fillStyle=this.tt,t.fillRect(0,0,this.M,this.$)}}),y.prototype=t(n.prototype,{Xi:function(t){t.drawImage(this.it,0,0)}}),O.prototype=t(n.prototype,{Xi:function(t){this.font&&(t.font=this.font),t.textAlign=this.st,t.textBaseline=this.nt,t.fillStyle=this.tt,t.fillText(this.ht,0,0)}}),M.prototype=t(f.prototype,{Li:function(t,i){this.rt.width=t,this.rt.height=i},kt:function(t){f.prototype.kt.apply(this,arguments),this.Ti()},Yi:function(t){f.prototype.Yi.apply(this,arguments),this.Ti()},Ti:function(){this.et.clearRect(0,0,this.rt.width,this.rt.height);for(var t=0;t<this.Z.length;t+=1)this.Z[t].Wi(this.et)},Xi:function(t){t.drawImage(this.rt,0,0)}}),H._i={Gi:1,qi:2,Ui:3,Ji:4},H.Ki=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:0,y:0},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],H.Ni={Vi:1,Zi:2,$i:3,th:4,ih:5},H.ni={si:1,hh:2},H.sh={right:1,bottom:2,left:4,top:8},H.nh={width:40,rh:20,eh:20},H.oh={width:80,rh:20,eh:20},H.prototype=t(f.prototype,{Tt:function(t,i){var h,s,n,r,e,o,u=t,a=i;for(this.It.Li(u*this.ut,a*this.ut),this.It.kt(new B({x:0*this.ut,y:0*this.ut,M:u*this.ut,$:a*this.ut,tt:P.o.n})),this.It.kt(new B({x:1*this.ut,y:1*this.ut,M:(u-2)*this.ut,$:(a-2)*this.ut,tt:P.o.h})),this.wt=u,this.yt=a,h=0;h<u;h+=1)this.uh(h,0,H._i.qi),this.uh(h,a-1,H._i.qi);for(h=0;h<a;h+=1)this.uh(0,h,H._i.qi),this.uh(u-1,h,H._i.qi);for(var f,c,l,p,d,v,w=E.j(0,2),y={left:1,top:1,right:u-1,bottom:a-1,ah:w},M=[y],m=[],g=[],b=0,x=0,I=this.ft,k=this.ct,C=this.at;0<M.length&&b<1e4;)if(c=z({},y=M.shift()),l=null,v=0===(w=y.ah)?(d="right","left"):(d="bottom","top"),0===x?(p=z({},y),3,l=z({},y),f=E.j(y[v]+I/2,y[d]-I/2),c[d]=f-this.vt/2-1,l[v]=f+this.vt/2+1,p[d]=f+this.vt/2,p[v]=f-this.vt/2,p.fh=!0,m.push(p)):(l=z({},y),f=E.j(y[v]+I/2,y[d]-I/2),c[d]=f,l[v]=f+1),n=c.right-c.left,r=c.bottom-c.top,I<n&&k<r&&C<n*r?(c.ah=0===x?w?0:1:r<n?0:1,M.push(c)):g.push(c),l&&(n=l.right-l.left,r=l.bottom-l.top,I<n&&k<r&&k<n*r?(l.ah=0===x?w?0:1:r<n?0:1,M.push(l)):g.push(l)),b+=1,0===x&&0===M.length)for(x+=1,I=this.pt,k=this.dt,C=this.lt,h=g.length-1;0<=h;h-=1)n=(c=g[h]).right-c.left,r=c.bottom-c.top,I<n&&k<r&&C<n*r&&(c.ah=r<n?0:1,M.push(c),g.splice(h,1));if(1e4<=b)throw new Error("Infinite loop in partitioning");for(this.mt=m,h=0;h<m.length;h+=1)for(n=(p=m[h]).left;n<p.right;n+=1)for(r=p.top;r<p.bottom;r+=1)this.uh(n,r,H._i.Gi,p);var O,j=[];for(h=0;h<g.length;h+=1){for(y=g[h],this.It.kt(new B({x:(y.left-1)*this.ut,y:(y.top-1)*this.ut,M:(y.right-y.left+2)*this.ut,$:(y.bottom-y.top+2)*this.ut,tt:P.o.n})),this.It.kt(new B({x:y.left*this.ut,y:y.top*this.ut,M:(y.right-y.left)*this.ut,$:(y.bottom-y.top)*this.ut,tt:P.o.s})),n=y.left-1;n<y.right+1;n+=1)this.uh(n,y.top-1,H._i.qi),this.uh(n,y.bottom,H._i.qi);for(r=y.top-1;r<y.bottom+1;r+=1)this.uh(y.left-1,r,H._i.qi),this.uh(y.right,r,H._i.qi);for(n=y.left;n<y.right;n+=1)for(r=y.top;r<y.bottom;r+=1)this.uh(n,r,H._i.Ji,y);y.ch=!1,j.push(y)}for(b=0;0<j.length&&b<1e4;){M=b<g.length?m:this.Mt;var Q=[];for((O=z({},y=j.shift())).top+=1,O.bottom-=1,O.left-=2,O.right+=2,s=0;s<M.length;s+=1)c=M[s],R(O,c)&&Q.push(c);for(O.left=y.left+1,O.right=y.right-1,O.top=y.top-2,O.bottom=y.bottom+2,s=0;s<M.length;s+=1)c=M[s],Q.indexOf(c)<0&&R(O,c)&&Q.push(c);if(0<Q.length){var A=0;c=E.Q(Q),O.left=y.left,O.top=y.top,O.right=y.right,O.bottom=y.bottom;var D=!1;O.left-=2,R(O,c)&&(D=!0,e=n=c.right,o=(r=E.j(Math.max(y.top,c.top),Math.min(y.bottom,c.bottom)-1))+1,A=H.sh.left),D||(O.left=y.left,O.top-=2,R(O,c)&&(D=!0,e=(n=E.j(Math.max(y.left,c.left),Math.min(y.right,c.right)-1))+1,o=r=c.bottom,A=H.sh.top)),D||(O.top=y.top,O.right+=2,R(O,c)&&(D=!0,e=n=c.left-1,o=(r=E.j(Math.max(y.top,c.top),Math.min(y.bottom,c.bottom)-1))+1,A=H.sh.right)),D||(e=(n=E.j(Math.max(y.left,c.left),Math.min(y.right,c.right)-1))+1,o=r=c.top-1,A=H.sh.bottom),this.uh(n,r,H._i.Ui),this.uh(e,o,H._i.Ui),y.ch=!0,this.Mt.push(y),y.lh||(y.lh=0),c.lh||(c.lh=0),y.lh|=A;var F=A<<2;8<F&&(F>>=4),c.lh|=F}else y.ch=!1,j.push(y);b+=1}if(1e4<=b)throw new Error("Infinite loop in door placements")},Gt:function(){var t,i,h,s=this.mt;for(h=0;h<this.Mt.length;h+=1)i=this.Mt[h],t=new B({x:Math.floor((i.left-.5)*this.ut),y:Math.floor((i.top-.5)*this.ut),M:Math.floor((i.right-i.left+1)*this.ut),$:Math.floor((i.bottom-i.top+1)*this.ut)}),this.kt(t),i.ph=t;var n=new f;for(this.kt(n),h=0;h<s.length;h+=1)i=s[h],t=new B({x:Math.floor((i.left-.5)*this.ut),y:Math.floor((i.top-.5)*this.ut),M:Math.floor((i.right-i.left+1)*this.ut),$:Math.floor((i.bottom-i.top+1)*this.ut)}),n.kt(t),i.ph=n},_t:function(){var t,i,h=this.Mt.slice(),s=E.A(h);for(s.hi=H.Ni.Vi,s.ii=[],this.dh(s),this.gt=s;0<h.length;)t=[],200<(i=((s=E.A(h)).right-s.left)*(s.bottom-s.top))&&t.push(H.Ni.$i),100<=i&&t.push(H.Ni.ih),i<100&&t.push(H.Ni.th),100<=i&&(0===this.bt.length||Math.random()<.1)&&t.push(H.Ni.Zi),s.hi=E.Q(t),s.ii=[],s.hi===H.Ni.Zi&&this.bt.push(s),this.dh(s)},vh:function(t,i,h,s){var n=s.width/2,r=s.eh/2,e=this.xt++;return h===H.sh.left?[{hi:H.ni.si,wh:e,left:t,top:i-n,right:t+s.rh,bottom:i+n},{hi:H.ni.hh,left:t+s.rh-r,top:i-r,right:t+s.rh+r,bottom:i+r}]:h===H.sh.top?[{hi:H.ni.si,wh:e,left:t-n,top:i,right:t+n,bottom:i+s.rh},{hi:H.ni.hh,left:t-r,top:i+s.rh-r,right:t+r,bottom:i+s.rh+r}]:h==H.sh.right?[{hi:H.ni.si,wh:e,left:t-s.rh,top:i-n,right:t,bottom:i+n},{hi:H.ni.hh,left:t-s.rh-r,top:i-r,right:t-s.rh+r,bottom:i+r}]:h==H.sh.bottom?[{hi:H.ni.si,wh:e,left:t-n,top:i-s.rh,right:t+n,bottom:i},{hi:H.ni.hh,left:t-r,top:i-s.rh-r,right:t+r,bottom:i-s.rh+r}]:[]},dh:function(s){var t,i={left:s.left*this.ut,top:s.top*this.ut,right:s.right*this.ut,bottom:s.bottom*this.ut};s.lh&H.sh.left&&(i.left+=1.5*this.ut),s.lh&H.sh.top&&(i.top+=1.5*this.ut),s.lh&H.sh.right&&(i.right-=1.5*this.ut),s.lh&H.sh.bottom&&(i.bottom-=1.5*this.ut);var h=i.right-i.left,n=i.bottom-i.top,r=[];if(s.hi===H.Ni.ih){var e,o,u,a,f,c,l=H.nh.rh+40,p=H.nh.width/2,d=H.nh.eh/2,v=E.j(0,2),w=E.j(1,3),y=E.j(0,w);if(n<h){for(u=Math.floor(h/l),a=Math.random()*(h-u*l),o=i.top+p;o+p<i.bottom;){for(t=0;t<u;t+=1)e=i.left+t*l+v*(H.nh.rh+d)+a,c=this.vh(e,o,v?H.sh.right:H.sh.left,H.nh),r=r.concat(c);w<=(y+=1)?(y=0,o+=40+H.nh.width):o+=H.nh.width+5}var M=null,m=null;r.forEach(function(t){(!M||t.top<M.top)&&(M=t),(!m||t.bottom>m.bottom)&&(m=t)}),f=Math.random()*(n-(m.bottom-M.top)),r.forEach(function(t){t.top+=f,t.bottom+=f})}else{for(u=Math.floor(n/l),a=Math.random()*(n-u*l),e=i.left+p;e+p<i.right;){for(t=0;t<u;t+=1)o=i.top+t*l+v*(H.nh.rh+d)+a,c=this.vh(e,o,v?H.sh.bottom:H.sh.top,H.nh),r=r.concat(c);w<=(y+=1)?(y=0,e+=40+H.nh.width):e+=H.nh.width+5}var g=null,b=null;r.forEach(function(t){(!g||t.left<g.left)&&(g=t),(!b||t.right>b.right)&&(b=t)}),f=Math.random()*(h-(b.right-g.left)),r.forEach(function(t){t.left+=f,t.right+=f})}}new B({x:i.left,y:i.top,M:h,$:n,tt:"#007700"});r.forEach(function(t){var i=new B({x:t.left,y:t.top,M:t.right-t.left,$:t.bottom-t.top,tt:"#990000"});this.kt(i);var h=C.di(t);t.jt=h,t.yh=i,s.ii.push(t)},this);var x=(s.left+s.right)/2*this.ut,I=(s.top+s.bottom)/2*this.ut,k=new O({ht:["Unknown","Mailroom","Lobby","Bullpen","Private","Open"][s.hi],x:x,y:I,st:"center",nt:"middle",font:"36px Arial"});this.kt(k)},Mh:function(t,i,h,s){var n=null,r=null,e=this.ut/2,o=null,u=!0;switch(h){case H._i.qi:r=new C(t*this.ut+e,i*this.ut+e,e,e),u=!1;break;case H._i.Gi:u=!0;break;case H._i.Ui:n="#00aa00",u=!0;break;case H._i.Ji:u=!0}return n&&(o=new B({x:t*this.ut,y:i*this.ut,M:this.ut,$:this.ut,tt:n})),{hi:h,mh:o,jt:r,gh:s,bh:u}},xh:function(t,i){return this.ot[t]&&this.ot[t][i]?this.ot[t][i]:null},uh:function(t,i,h,s){this.ot[t]||(this.ot[t]={});var n=this.ot[t][i];n&&n.mh&&this.Yi(n.mh),n=this.Mh(t,i,h,s),(this.ot[t][i]=n).mh&&this.kt(n.mh)},Ih:function(t,i){return this.xh(Math.floor(t/this.ut),Math.floor(i/this.ut))},kh:function(t,i){var h,s,n=[],r=Math.floor(t/this.ut),e=Math.floor(i/this.ut),o=null,u=H.Ki;for(s=0;s<u.length;s+=1)h=u[s],(o=this.xh(r+h.x,e+h.y))&&n.push(o);return n}}),m.prototype=t(f.prototype,{Jt:function(){this.jt.vi(this.x,this.y)},ti:function(t){if((this.Qt.x||this.Qt.y)&&(this.it.angle=v(this.Qt)),this.x+=this.Qt.x*t,this.y+=this.Qt.y*t,this.Jt(),this.Dt){var i,h,s,n,r=this.Ot.kh(this.x,this.y);for(i=0;i<r.length;i+=1)!(h=r[i]).bh&&h.jt&&h.jt.xi(this.jt)&&(s=this.jt.x-h.jt.x,n=this.jt.y-h.jt.y,Math.abs(s)>Math.abs(n)?this.x=0<s?h.jt.Mi()+this.jt.D:h.jt.wi()-this.jt.D:this.y=0<n?h.jt.mi()+this.jt.F:h.jt.yi()-this.jt.F,this.Jt())}if(h=this.Ot.Ih(this.x,this.y),this.Ft&&h&&h.gh&&h.gh.ii){var e,o=h.gh.ii;for(i=0;i<o.length;i+=1){if(o[i].hi===H.ni.si){var u=o[i];u.ri&&u.ui.xi(this.jt)&&(u.ri=!1,this.Ct.Ch(u))}(e=o[i].jt).xi(this.jt)&&(s=this.jt.x-e.x,n=this.jt.y-e.y,Math.abs(s)>Math.abs(n)?this.x=0<s?e.Mi()+this.jt.D:e.wi()-this.jt.D:this.y=0<n?e.mi()+this.jt.F:e.yi()-this.jt.F,this.Jt())}}if(h&&h.gh&&this.At!==h.gh){var a=this.At;if(this.At=h.gh,a&&(!a.fh||!this.At.fh)){a.Oh&&(a.Oh.Hi(),a.Oh=null);var f=new w({z:a.ph,R:"alpha",from:0,B:1,H:.5});a.Oh=f,this.Ct.Pt.ci.Si(f)}this.At.Oh&&(this.At.Oh.Hi(),this.At.Oh=null),this.At.ph.alpha=0}}}),g.prototype=t(f.prototype,{create:function(){},v:function(){},$t:function(t){this.zt.push(t)},ti:function(t){for(var i=0;i<this.zt.length;i+=1)this.zt[i](t)},Wi:function(t){this.Xi(t)}}),b.prototype=t(g.prototype,{v:function(){this.keys.forEach(function(t){t.v()})},qt:function(){var t,i=this.Ot.Mt.filter(function(t){return t.ii&&t.ii.length&&t.ii.some(function(t){return t.hi===H.ni.si})}),h=E.j(c,Math.max(c+1,Math.floor(i.length*l))),s=[];for(t=0;t<h;t+=1)s.push(E.A(i));var n=s.reduce(x,[]),r=i.reduce(x,[]),e=E.j(p,d+1);e>n.length&&(e=n.length);var o,u,a=[],f=[];for(t=0;t<e;t+=1)o=E.A(n),u=E.A(r),o.jh=u.wh,u.Qh=o.wh,a.push(o),f.push(u);n.forEach(I),a.forEach(I),f.forEach(I),this.Et=s,this.Rt=n,this.Bt=a,this.Ht=f,this.Rt.forEach(function(t){t.yh.tt="white"}),this.Bt.forEach(function(t){t.yh.tt="blue"}),this.Ht.forEach(function(t){t.yh.tt="gray"})},Ch:function(t){t.yh.tt="red";var i=new B({x:this.Ut.x,y:this.Ut.y,M:20,$:10,tt:"#eeeeee",N:10,V:5,angle:E.O(0,2*Math.PI)});this.Ot.kt(i);var h=new w({z:i,R:"x",from:this.Ut.x,B:t.jt.x,H:.5,S:w.X.ji}),s=new w({z:i,R:"y",from:this.Ut.y,B:t.jt.y,H:.5,S:w.X.ji,Y:function(){this.Ot.Yi(i)}.bind(this)}),n=new w({z:i,R:"angle",from:i.angle,B:i.angle+E.O(-Math.PI,Math.PI),H:.5});this.Pt.ci.Si(h),this.Pt.ci.Si(s),this.Pt.ci.Si(n)}}),k.prototype=t(g.prototype,{create:function(){Object.entries(P.t).forEach(function(t){var i=new Image;i.onload=this.Ah.bind(this),i.src=t[1],this.t.push(i),P.e[t[0]]=i},this)},Ah:function(t){this.ai||this.t.reduce(function(t,i){return(i.complete?1:0)+(t||0)},0)>=this.t.length&&this.Dh()},Dh:function(){this.ai||(Object.entries(P.r).forEach(function(t){P.o[t[0]]=this.Pt.et.createPattern(P.e[t[0]],t[1])},this),this.ai=!0,this.Pt.Fh(new b(this.Pt)))}}),j.prototype={pi:function(){this.li(),setTimeout(function(){this.li()}.bind(this),100)},li:function(){var t,i,h=e.getComputedStyle(u.u("root")),s=parseInt(h.width,10),n=parseInt(h.height,10),r=this.rt.width/this.rt.height;s/n<r?i=(t=s)/r:t=(i=n)*r,this.rt.style.width=Math.floor(t)+"px",this.rt.style.height=Math.floor(i)+"px",this.rt.style.position="absolute",this.rt.style.left="50%",this.rt.style.top="50%",this.rt.style.marginLeft=Math.floor(-t/2)+"px",this.rt.style.marginTop=Math.floor(-i/2)+"px"},Fh:function(t){this.Ct&&this.Ct.v(),(this.Ct=t).create()},ti:function(t){var i=(t-this.G)/1e3;0<i&&(.2<i&&(i=.2),this.Ct.ti(i),this.Ct.Wi(this.et),this.ci.ti(i),this.G=t),requestAnimationFrame(this.ti)}},e.game=new j}(window,document);