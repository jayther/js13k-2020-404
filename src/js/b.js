!function(o,i){var w={t:"Mail Delivery",width:640,height:360,minMailableRooms:2,maxMailableRoomRate:.25,minMissingPeople:5,maxMissingPeople:10},Y={i:{s:"robot_3Dblue.png"},n:{e:"repeat",o:"repeat",r:"repeat"},a:{},f:{}};function X(t,i){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(h[e]=n[e])}return h}function t(){return X.apply(this,[{}].concat(Array.prototype.slice.call(arguments)))}function e(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var h,r=(h={},{u:function(t){return h[t]||(h[t]=i.getElementById(t)),h[t]},create:function(t){return i.createElement(t)}});function a(h,s){var n={},t={c:function(t){var i=t.keyCode;e(n,i)||(n[i]=!1),n[i]||h(i),n[i]=!0,t.preventDefault()},l:function(t){var i=t.keyCode;e(n,i)||(n[i]=!1),n[i]&&s(i),n[i]=!1,t.preventDefault()},v:function(){o.removeEventListener("keydown",t.c,!1),o.removeEventListener("keyup",t.l,!1)}};return o.addEventListener("keydown",t.c,!1),o.addEventListener("keyup",t.l,!1),t}a.keys={d:65,w:87,p:83,m:68,b:90,M:81,left:37,g:38,right:39,k:40,A:32,O:13};var Q=null;Q={I:function(t,i){return t+Math.random()*(i-t)},D:function(t,i){return Math.floor(Q.I(t,i))},S:function(t){return t[Q.D(0,t.length)]},j:function(t){var i=Q.D(0,t.length),h=t[i];return t.splice(i,1),h},F:function(t){for(var i=[],h=0;0<t;)1&t&&i.push(1<<h),t>>=1,h+=1;return 0<i.length?Q.S(i):0}};var T={C:function(t,i,h){return t<i?i:h<t?h:t},P:function(t,i){return t.left<i.right&&t.right>i.left&&t.top<i.bottom&&t.bottom>i.top},R:function(t){return Math.atan2(t.y,t.x)},Y:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},X:function(t,i){var h=Math.cos(i),s=Math.sin(i);return{x:t.x*h-t.y*s,y:t.x*s+t.y*h}},Q:function(t,i,h){if(0===h)return{left:t.left,top:t.top,right:t.right,bottom:t.bottom};var s,n,e=t.right-t.left,o=t.bottom-t.top,r=h/360*Math.PI*2;return 90!==h&&270!==h||(n=e,e=o,o=n),(s=90===h?{x:t.left,y:t.bottom}:180===h?{x:t.right,y:t.bottom}:{x:t.right,y:t.top}).x-=i.x,s.y-=i.y,s=T.X(s,r),{left:i.x+s.x,top:i.y+s.y,right:i.x+s.x+e,bottom:i.y+s.y+o}}};function W(t,i,h,s){this.x=t||0,this.y=i||0,this.T=h||0,this.W=s||0}function p(t){this.z=X({H:null,N:null,from:0,B:1,V:1,L:p.q._,G:null,U:null},t||{}),this.Z=-1,this.J=-1,this.K=!1}function f(){this.$=0,this.tt=[]}function s(t){var i=X({x:0,y:0,it:1,ht:1,angle:0,st:!0,alpha:1,nt:0,et:0},t||{});this.ot=null,this.x=i.x,this.y=i.y,this.it=i.it,this.ht=i.ht,this.angle=i.angle,this.st=i.st,this.alpha=i.alpha,this.nt=i.nt,this.et=i.et}function u(t){s.apply(this,arguments),this.rt=[]}function z(t){s.apply(this,arguments);var i=X({w:0,h:0,at:"black",ft:0,ut:0,ct:0,lt:1,wt:1},t||{});this.ft=i.ft,this.w=i.w,this.h=i.h,this.ut=i.ut,this.ct=i.ct,this.lt=i.lt,this.wt=i.wt,this.at=i.at}function c(t){s.apply(this,arguments);var i=X({w:0,h:0,vt:null},t||{});this.w=i.w,this.h=i.h,this.vt=i.vt,this.w&&!i.it&&(this.it=this.w/this.vt.width),this.h&&!i.ht&&(this.ht=this.h/this.vt.height)}function l(t){s.apply(this,arguments);var i=X({dt:"",pt:"left",yt:"top",font:null,at:"black"},t||{});this.at=i.at,this.dt=i.dt,this.pt=i.pt,this.yt=i.yt,this.font=i.font}function n(t){s.apply(this,arguments);var i=X({mt:[],at:"black"},t||{});this.mt=i.mt,this.at=i.at}function v(t){u.apply(this,arguments);var i=X({w:100,h:100},t||{});this.xt=r.create("canvas"),this.xt.width=i.w,this.xt.height=i.h,this.bt=this.xt.getContext("2d")}function d(t,i,h,s,n){var e,o=[],r=s/(h-1);for(e=0;e<h;e+=1)o.push({x:e*r,y:t+i-n/2}),i*=-1;for(i*=-1,e=h-1;0<=e;e-=1)o.push({x:e*r,y:t+i+n/2}),i*=-1;return o}W.Mt=function(t){return new W((t.left+t.right)/2,(t.top+t.bottom)/2,(t.right-t.left)/2,(t.bottom-t.top)/2)},(W.prototype={}).gt=function(t,i){this.x=t||0,this.y=i||0},W.prototype.kt=function(){return this.x-this.T},W.prototype.At=function(){return this.y-this.W},W.prototype.Ot=function(){return this.x+this.T},W.prototype.It=function(){return this.y+this.W},W.prototype.Dt=function(){return 2*this.T},W.prototype.St=function(){return 2*this.W},W.prototype.jt=function(t){return Math.abs(this.x-t.x)<this.T+t.T&&Math.abs(this.y-t.y)<this.W+t.W},W.prototype.Ft=function(t,i){return Math.abs(this.x-t)<this.T&&Math.abs(this.y-i)<this.W},W.prototype.Ct=function(){return new W(this.x,this.y,this.T,this.W)},W.prototype.Pt=function(t){return this.T+=t,this.W+=t,this},W.prototype.Et=function(t,i){var h,s=i/360*Math.PI*2;90!==i&&270!==i||(h=this.T,this.T=this.W,this.W=h);var n=T.X({x:this.x-t.x,y:this.y-t.y},s);return this.x=t.x+n.x,this.y=t.y+n.y,this},W.prototype.Rt=function(){return{left:this.x-this.T,top:this.y-this.W,right:this.x+this.T,bottom:this.y+this.W}},W.prototype.Yt=function(){return{x:this.x-this.T,y:this.y-this.W,w:2*this.T,h:2*this.W}},p.q={_:function(t){return t},Xt:function(t){return t*t},Qt:function(t){return t*(2-t)},Tt:function(t){return t<.5?2*t*t:(4-2*t)*t-1},Wt:function(t){return t*t*t},zt:function(t){return--t*t*t+1},Ht:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Nt:function(t){return t*t*t*t},Bt:function(t){return 1- --t*t*t*t},Vt:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},Lt:function(t){return t*t*t*t*t},_t:function(t){return 1+--t*t*t*t*t},qt:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},p.prototype={Gt:function(t){this.Z=t,this.J=t+this.z.V},Ut:function(t){if(this.z.H&&this.z.N||this.z.G){var i=(t-this.Z)/this.z.V;1<i&&(i=1);var h=this.z.L(i),s=this.z.from+(this.z.B-this.z.from)*h;this.z.H&&this.z.N&&(this.z.H[this.z.N]=s),this.z.G&&this.z.G(s)}},Zt:function(){this.K=!0}},f.Jt=null,f.prototype={Kt:function(t){t.Gt(this.$),this.tt.push(t)},Ut:function(t){var i,h,s;for(i=0;i<this.tt.length;i+=1)s=!1,(h=this.tt[i]).K||h.Ut(this.$),h.K?s=!0:this.$>=h.J&&(h.z.U&&h.z.U(),s=!0),s&&(this.tt.splice(i,1),i-=1);this.$+=t}},u.prototype=t(s.prototype={$t:function(t){this.it=t,this.ht=t},ti:function(t){this.st&&.01<=this.alpha&&(t.save(),(this.x||this.y)&&t.translate(this.x,this.y),1===this.it&&1===this.ht||t.scale(this.it,this.ht),this.angle&&t.rotate(this.angle),(this.nt||this.et)&&t.translate(-this.nt,-this.et),this.alpha<1&&(t.globalAlpha*=this.alpha),this.ii(t),t.restore())},ii:function(t){}},{hi:function(t){return this.rt.push(t),t.ot=this},si:function(t){var i=this.rt.indexOf(t);return 0<=i&&(this.rt.splice(i,1),t.ot=null),this},ii:function(t){for(var i=0;i<this.rt.length;i+=1)this.rt[i].ti(t)}}),z.prototype=t(s.prototype,{ii:function(t){if(t.fillStyle=this.at,this.ft){var i=this.ft,h=this.w,s=this.h;t.beginPath(),t.moveTo(i,0),t.lineTo(h-i,0),t.arcTo(h,0,h,i,i),t.lineTo(h,s-i),t.arcTo(h,s,h-i,s,i),t.lineTo(i,s),t.arcTo(0,s,0,s-i,i),t.lineTo(0,i),t.arcTo(0,0,i,0,i),t.closePath(),(this.ut||this.ct)&&t.translate(this.ut,this.ct),1===this.lt&&1===this.wt||t.scale(this.lt,this.wt),t.fill()}else t.beginPath(),t.rect(0,0,this.w,this.h),t.closePath(),(this.ut||this.ct)&&t.translate(this.ut,this.ct),1===this.lt&&1===this.wt||t.scale(this.lt,this.wt),t.fill()}}),c.prototype=t(s.prototype,{ii:function(t){t.drawImage(this.vt,0,0)}}),l.prototype=t(s.prototype,{ii:function(t){this.font&&(t.font=this.font),t.textAlign=this.pt,t.textBaseline=this.yt,t.fillStyle=this.at,t.fillText(this.dt,0,0)}}),n.prototype=t(s.prototype,{ii:function(t){var i,h;for(t.beginPath(),i=0;i<this.mt.length;i+=1)h=this.mt[i],0===i?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);t.closePath(),t.fillStyle=this.at,t.fill()}}),v.prototype=t(u.prototype,{ni:function(t,i){this.xt.width=t,this.xt.height=i},hi:function(t){u.prototype.hi.apply(this,arguments),this.ei()},si:function(t){u.prototype.si.apply(this,arguments),this.ei()},ei:function(){this.bt.clearRect(0,0,this.xt.width,this.xt.height);for(var t=0;t<this.rt.length;t+=1)this.rt[t].ti(this.bt)},ii:function(t){t.drawImage(this.xt,0,0)}});var y,m,x,b=((y=new v({w:70,h:70})).hi(new z({w:70,h:70,at:"#c99869"})),y.hi(new n({mt:d(25,5,7,70,16),at:"#c58f5c"})),y.hi(new n({mt:d(55,5,7,70,16),at:"#c58f5c"})),y),M=((m=new v({w:70,h:70})).hi(new z({w:70,h:70,at:"#838796"})),m.hi(new n({mt:d(25,5,7,70,24),at:"#7e8291"})),m.hi(new n({mt:d(55,5,7,70,16),at:"#7e8291"})),m),g=((x=new v({w:70,h:70})).hi(new z({w:70,h:70,at:"#acc0c1"})),x.hi(new n({mt:d(25,5,7,70,16),at:"#bbcbcc"})),x.hi(new n({mt:d(55,5,7,70,16),at:"#bbcbcc"})),x);function H(t,i){this.oi=t,this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom,this.ri=0,this.ai=[],this.fi=[],this.ui=!1,this.ci=null,this.li=0,this.wi=!1,this.vi={x:0,y:0}}function k(t,i,h,s,n,e,o){this.oi=k.di++,this.ri=t,this.pi=o;var r=i-s/2,a=h;this.yi=new W((i+r)/2,(h+a)/2,(s+e/2)/2+k.mi,(n+e/2)/2+k.mi),this.xi=new z({x:this.yi.x,y:this.yi.y,w:2*this.yi.T,h:2*this.yi.W,st:!1,at:"#00cc00",alpha:.5,nt:this.yi.T,et:this.yi.W}),this.bi=[this.xi,new z({x:i-s/2,y:h-n/2,w:s,h:n,at:"#990000"}),new z({x:i-s/2-e/2,y:h-e/2,w:e,h:e,at:"#990000"})],this.wi=!1,this.Mi=-1,this.gi=-1,this.ki=null,this.Ai=null,this.Oi=null,this.Ii=null,this.Di=null,this.Si=!1,this.ji=null}function N(){u.apply(this,arguments),this.Fi={},this.Ci=20,this.Pi=1e3,this.Ei=20,this.Ri=20,this.Yi=100,this.Xi=12,this.Qi=12,this.Ti=2,this.Wi=0,this.zi=0,this.Hi=[],this.Ni=[],this.Bi=null,this.Vi=[],this.Li=0,this._i=0,this.qi=new v,this.hi(this.qi)}function A(t,i){u.call(this,i),this.Ai=t;var h=X({ki:null},i||{});this.Gi=new W(0,0,10,10),this.Ui=new W(0,0,10,10),this.Zi=new W(0,0,10,10),this.Ji=200,this.Ki=4,this.$i={x:0,y:0},this.th={x:0,y:0},this.ih={x:0,y:0},this.ki=h.ki,this.hh=null;var s=new c({vt:Y.a.s,w:19,h:20,nt:74,et:77});this.hi(s),this.vt=s,this.sh=!0,this.nh=!0,this.eh=0}function O(t){z.call(this,X({at:"#eeeeee",w:20,h:10,nt:10,et:5},t||{}))}function I(t,i,h,s,n){var e=new u({x:t,y:i});this.oh=e,this.Si=!1,this.rh=s||0,this.ah=n;var o=new z({x:-20,y:-5,w:40,h:25,at:"#cccccc",ft:5});e.hi(o),this.fh=o;var r=new u({x:0,y:5});this.uh=r,e.hi(r);var a=new z({x:-20,y:-40,w:40,h:40,at:"#ffffff",ft:5});r.hi(a);var f=new l({x:0,y:-20,dt:h,font:"20px Arial",at:"black",pt:"center",yt:"middle"});r.hi(f),this.ch=f,this.tt=[]}function D(t,i){u.call(this),this.lh=t,this.z=i,this.wh=[]}function S(){D.apply(this,arguments),this.vh=[],this.dh=[],this.ph=[],this.yh=[],this.mh={},this.xh=[],this.bh=S.gh.Mh,this.kh=90,this.Ah=3,this.Oh=null,this.Ih={Dh:60,Sh:70,jh:60,Fh:70},this.Wi=Q.D(this.Ih.Dh,this.Ih.Sh),this.zi=Q.D(this.Ih.jh,this.Ih.Fh);var t=new z({w:w.width,h:w.height,at:"#333333"});if(this.hi(t),this.ki=new N,this.hi(this.ki),this.ki.Ch(this.Wi,this.zi),this.ki.Ph(),this.ki.Eh(),this.ki.it=2,this.ki.ht=2,this.Rh=new u({x:w.width/2,y:w.height/2}),this.hi(this.Rh),this.Yh=new l({dt:"...",x:5,y:5,pt:"left",yt:"top",font:"16px Arial",at:"#ffffff"}),this.hi(this.Yh),this.Xh=new l({dt:"Time left: "+this.kh+"s",x:5,y:25,pt:"left",yt:"top",font:"16px Arial",at:"#ffffff"}),this.hi(this.Xh),this.Qh=new u({x:5,y:45}),this.hi(this.Qh),this.Th(),this.Wh=!1,this.Wh){var i=this.ki.Wi*this.ki.Ci,h=this.ki.zi*this.ki.Ci;i/h>w.width/w.height?this.ki.it=this.ki.ht=w.width/i:this.ki.it=this.ki.ht=w.height/h,this.ki.Hi.forEach(function(t){t.ci.st=!1}),this.ki.Ni[0].ci.st=!1}this.zh=new A(this,{ki:this.ki}),this.ki.hi(this.zh);var s=this.ki.Bi;this.zh.x=(s.left+s.right)/2*this.ki.Ci,this.zh.y=(s.top+s.bottom)/2*this.ki.Ci,this.zh.Hh(),this.keys=[],this.Nh={},this.Nh[N.Bh.left]=[a.keys.d,a.keys.M,a.keys.left],this.Nh[N.Bh.top]=[a.keys.w,a.keys.b,a.keys.g],this.Nh[N.Bh.right]=[a.keys.m,a.keys.right],this.Nh[N.Bh.bottom]=[a.keys.p,a.keys.k];var n={};Object.entries(this.Nh).forEach(function(i){i[1].forEach(function(t){n[t]=i[0]})}),this.Vh=n,this.Lh=a(this._h.bind(this),this.qh.bind(this)),this.Gh=new u,this.hi(this.Gh),this.Uh=new z({at:"#000000",alpha:.7,w:w.width,h:w.height}),this.Gh.hi(this.Uh),this.Zh=new l({dt:"You have "+this.kh+" seconds to deliver all the mail!",font:"24px Arial",at:"#ffffff",x:w.width/2,y:w.height/2-5,pt:"center",yt:"bottom"}),this.Gh.hi(this.Zh),this.Jh=new l({dt:"Follow the pointers to go to the rooms that need mail.",font:"20px Arial",at:"#ffffff",x:w.width/2,y:w.height/2+5,pt:"center",yt:"top"}),this.Gh.hi(this.Jh),this.Kh=new l({dt:"Press any movement keys to start",font:"20px Arial",at:"#ffffff",x:w.width/2,y:w.height/2+30,pt:"center",yt:"top"}),this.Gh.hi(this.Kh),this.$h(this.ts.bind(this))}function j(t,i){return t.concat(i.ai.filter(function(t){return t.ri===N.ss.hs||t.ri===N.ss.ns}))}function F(t){t.wi=!0,t.es(!0)}function C(t){var i=new u,h=new n({x:150,y:0,mt:[{x:20,y:0},{x:-15,y:-10},{x:-15,y:10}],at:t});return i.hi(h),i.os=function(t){h.x=10+(T.C(t,50,400)-50)/350*140},i}function P(){D.apply(this,arguments),this.$=0,this.rs=2,this.as=.5,this.fs=1.5,this.us=Q.I(this.as,this.fs),this.cs=[],this.ls=new z({w:w.width,h:w.height,at:Y.f.e,lt:5,wt:5}),this.hi(this.ls),this.ws=new u,this.hi(this.ws),this.s=new c({vt:Y.a.s,x:170,y:w.height/2,w:148,h:154,nt:74,et:77}),this.hi(this.s);var t=new l({dt:"Employee Not Found",font:"32px Arial",x:420,y:100,pt:"center",yt:"middle",at:"white"});this.hi(t);var i=new u({x:420,y:190});this.hi(i);var h=new l({dt:"Controls:",font:"24px Arial",x:0,y:-40,pt:"center",yt:"bottom",at:"white"});i.hi(h);var s=this.vs=[new I(0,0,"W",0,this.lh.ah),new I(-45,45,"A",.125,this.lh.ah),new I(0,45,"S",.25,this.lh.ah),new I(45,45,"D",.375,this.lh.ah)];this.vs.forEach(function(t){i.hi(t.oh),t.Gt()});var n=new l({dt:"Press any of these keys to start",font:"18px Arial",x:0,y:70,pt:"center",yt:"top",at:"white"});i.hi(n);var e=[["W","A","S","D"],["↑","←","↓","→"],["Z","Q","S","D"]],o=0;this.ds=setInterval(function(){e.length<=(o+=1)&&(o=0),s.forEach(function(t,i){t.ch.dt=e[o][i]})},1e3);var r=[a.keys.d,a.keys.w,a.keys.p,a.keys.m,a.keys.M,a.keys.b,a.keys.left,a.keys.g,a.keys.right,a.keys.k];this.Lh=a(function(){},function(i){r.some(function(t){return t===i})&&this.lh.ps(new S(this.lh))}.bind(this)),this.$h(this.ts.bind(this))}function E(){D.apply(this,arguments),this.i=[],this.ys=!1,this.ms=new l({x:w.width/2,y:w.height/2,dt:"0%",at:"black",pt:"center",yt:"middle",font:"32px Arial"}),this.hi(new z({w:w.width,h:w.height,at:"#777777"})),this.hi(this.ms)}function R(){this.Ut=this.Ut.bind(this),this.xs=r.u("root");var t=r.create("canvas");t.width=w.width,t.height=w.height,this.xs.appendChild(t),this.bs=Y,this.xt=t,this.bt=t.getContext("2d"),this.bt.font="16px Arial",this.ah=new f,f.Jt=this.ah,this.Ai=new E(this),this.$=0,this.Ms=this.Ms.bind(this),o.addEventListener("resize",this.gs.bind(this),!1),this.gs(),this.Ut(0),this.Ai.create()}Y.a.e=b.xt,Y.a.r=M.xt,Y.a.o=g.xt,H.prototype={},k.di=0,k.mi=5,k.prototype={ks:function(h,t){var s=t/360*Math.PI*2;this.bi.forEach(function(t){var i=T.X({x:t.x-h.x,y:t.y-h.y},s);t.x=h.x+i.x,t.y=h.y+i.y,t.angle=s}),this.yi.Et(h,t)},es:function(t){(this.xi.st=t)?this.As():this.Os()},As:function(){var t,i;this.ji&&this.ji.Zt(),this.Si=!0,t=new p({from:1,B:.8,V:.5,L:p.q.Wt,G:function(t){this.xi.$t(t)}.bind(this),U:function(){this.Si&&(f.Jt.Kt(i),this.ji=i)}.bind(this)}),i=new p({from:.8,B:1,V:.5,L:p.q.zt,G:function(t){this.xi.$t(t)}.bind(this),U:function(){this.Si&&(f.Jt.Kt(t),this.ji=t)}.bind(this)}),f.Jt.Kt(t)},Os:function(){this.Si=!1,this.ji&&(this.ji.Zt(),this.ji=null)},Is:function(t){if(this.wi=!1,this.bi.forEach(function(t){null===this.ki&&(this.ki=t.ot)},this),this.es(!1),-1===this.Mi){var i=new O({x:t.x,y:t.y,angle:Q.I(0,2*Math.PI)});this.ki.hi(i);var h=new p({H:i,N:"x",from:t.x,B:this.yi.x,V:.5,L:p.q.Wt}),s=new p({H:i,N:"y",from:t.y,B:this.yi.y,V:.5,L:p.q.Wt,U:function(){this.ki.si(i)}.bind(this)}),n=new p({H:i,N:"angle",from:i.angle,B:i.angle+Q.I(-Math.PI,Math.PI),V:.5});f.Jt.Kt(h),f.Jt.Kt(s),f.Jt.Kt(n),-1!==this.gi&&this.Di&&this.Di(this)}else this.Ii&&this.Ii(this);this.Oi&&this.Oi(this)}},N.Ds={Ss:1,js:2,Fs:3,Cs:4},N.Ps=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:0,y:0},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],N.Es={Rs:1,Ys:2,Xs:3,Qs:4,Ts:5},N.ss={hs:1,ns:2,Ws:3,zs:4,Hs:5},N.Bh={right:1,bottom:2,left:4,top:8},N.Ns={width:40,Bs:20,Vs:20,ri:N.ss.hs},N.Ls={width:85,Bs:20,Vs:20,_s:5,ri:N.ss.ns},N.qs={width:80,Bs:20,Vs:20,_s:10,ri:N.ss.hs},N.Gs={width:40,Bs:20,Vs:20,ri:N.ss.hs},N.mi=5,N.prototype=t(u.prototype,{Ch:function(t,i){var h,s,n,e,o,r,a=t,f=i;for(this.qi.ni(a*this.Ci,f*this.Ci),this.qi.hi(new z({x:0*this.Ci,y:0*this.Ci,w:a*this.Ci,h:f*this.Ci,at:Y.f.r})),this.qi.hi(new z({x:1*this.Ci,y:1*this.Ci,w:(a-2)*this.Ci,h:(f-2)*this.Ci,at:Y.f.e})),this.Wi=a,this.zi=f,h=0;h<a;h+=1)this.Us(h,0,N.Ds.js),this.Us(h,f-1,N.Ds.js);for(h=0;h<f;h+=1)this.Us(0,h,N.Ds.js),this.Us(a-1,h,N.Ds.js);for(var u,c,l,w,v,d,p,y=Q.D(0,2),m={left:1,top:1,right:a-1,bottom:f-1,Zs:y},x=[m],b=[],M=[],g=0,k=0,A=this.Ei,O=this.Ri,I=this.Pi;0<x.length&&g<1e4;)if(c=X({},m=x.shift()),l=null,p=0===(y=m.Zs)?(d="right","left"):(d="bottom","top"),0===k?(v=X({},m),3,l=X({},m),u=Q.D(m[p]+A/2,m[d]-A/2),c[d]=u-this.Ti/2-1,l[p]=u+this.Ti/2+1,v[d]=u+this.Ti/2,v[p]=u-this.Ti/2,v.Js=!0,b.push(v)):(l=X({},m),u=Q.D(m[p]+A/2,m[d]-A/2),c[d]=u,l[p]=u+1),n=c.right-c.left,e=c.bottom-c.top,A<n&&O<e&&I<n*e?(c.Zs=0===k?y?0:1:e<n?0:1,x.push(c)):M.push(c),l&&(n=l.right-l.left,e=l.bottom-l.top,A<n&&O<e&&O<n*e?(l.Zs=0===k?y?0:1:e<n?0:1,x.push(l)):M.push(l)),g+=1,0===k&&0===x.length)for(k+=1,A=this.Xi,O=this.Qi,I=this.Yi,h=M.length-1;0<=h;h-=1)n=(c=M[h]).right-c.left,e=c.bottom-c.top,A<n&&O<e&&I<n*e&&(c.Zs=e<n?0:1,x.push(c),M.splice(h,1));if(1e4<=g)throw new Error("Infinite loop in partitioning");for(this.Ni=b,h=0;h<b.length;h+=1)for(n=(v=b[h]).left;n<v.right;n+=1)for(e=v.top;e<v.bottom;e+=1)this.Us(n,e,N.Ds.Ss,v);var D,S=[];for(h=0;h<M.length;h+=1){for(m=M[h],this.qi.hi(new z({x:(m.left-1)*this.Ci,y:(m.top-1)*this.Ci,w:(m.right-m.left+2)*this.Ci,h:(m.bottom-m.top+2)*this.Ci,at:Y.f.r})),this.qi.hi(new z({x:m.left*this.Ci,y:m.top*this.Ci,w:(m.right-m.left)*this.Ci,h:(m.bottom-m.top)*this.Ci,at:Y.f.o})),n=m.left-1;n<m.right+1;n+=1)this.Us(n,m.top-1,N.Ds.js),this.Us(n,m.bottom,N.Ds.js);for(e=m.top-1;e<m.bottom+1;e+=1)this.Us(m.left-1,e,N.Ds.js),this.Us(m.right,e,N.Ds.js);for(w=new H(this._i++,m),n=m.left;n<m.right;n+=1)for(e=m.top;e<m.bottom;e+=1)this.Us(n,e,N.Ds.Cs,w);S.push(w)}for(g=0;0<S.length&&g<1e4;){x=g<M.length?b:this.Hi;var j=[];for((D=X({},m=S.shift())).top+=1,D.bottom-=1,D.left-=2,D.right+=2,s=0;s<x.length;s+=1)c=x[s],T.P(D,c)&&j.push(c);for(D.left=m.left+1,D.right=m.right-1,D.top=m.top-2,D.bottom=m.bottom+2,s=0;s<x.length;s+=1)c=x[s],j.indexOf(c)<0&&T.P(D,c)&&j.push(c);if(0<j.length){var F=0;c=Q.S(j),D.left=m.left,D.top=m.top,D.right=m.right,D.bottom=m.bottom;var C=!1,P=this.Ci/2,E=this.Ci/2;D.left-=2,T.P(D,c)&&(C=!0,o=n=c.right,r=(e=Q.D(Math.max(m.top,c.top),Math.min(m.bottom,c.bottom)-1))+1,P+=2*this.Ci,F=N.Bh.left),C||(D.left=m.left,D.top-=2,T.P(D,c)&&(C=!0,o=(n=Q.D(Math.max(m.left,c.left),Math.min(m.right,c.right)-1))+1,r=e=c.bottom,E+=2*this.Ci,F=N.Bh.top)),C||(D.top=m.top,D.right+=2,T.P(D,c)&&(C=!0,o=n=c.left-1,r=(e=Q.D(Math.max(m.top,c.top),Math.min(m.bottom,c.bottom)-1))+1,P+=2*-this.Ci,F=N.Bh.right)),C||(o=(n=Q.D(Math.max(m.left,c.left),Math.min(m.right,c.right)-1))+1,r=e=c.top-1,E+=2*-this.Ci,F=N.Bh.bottom),this.Us(n,e,N.Ds.Fs),this.Us(o,r,N.Ds.Fs),m.vi={x:(n+o)/2*this.Ci+P,y:(e+r)/2*this.Ci+E},m.ui=!0,this.Hi.push(m),m.li||(m.li=0),c.li||(c.li=0),m.li|=F;var R=F<<2;8<R&&(R>>=4),c.li|=R}else m.ui=!1,S.push(m);g+=1}if(1e4<=g)throw new Error("Infinite loop in door placements")},Eh:function(){var t,i,h,s=this.Ni;for(h=0;h<this.Hi.length;h+=1)i=this.Hi[h],t=new z({x:Math.floor((i.left-.5)*this.Ci),y:Math.floor((i.top-.5)*this.Ci),w:Math.floor((i.right-i.left+1)*this.Ci),h:Math.floor((i.bottom-i.top+1)*this.Ci)}),this.hi(t),i.ci=t;var n=new u;for(this.hi(n),h=0;h<s.length;h+=1)i=s[h],t=new z({x:Math.floor((i.left-.5)*this.Ci),y:Math.floor((i.top-.5)*this.Ci),w:Math.floor((i.right-i.left+1)*this.Ci),h:Math.floor((i.bottom-i.top+1)*this.Ci)}),n.hi(t),i.ci=n},Ph:function(){var t,i,h=this.Hi.slice(),s=Q.j(h);for(s.ri=N.Es.Rs,this.Ks(s),this.Bi=s;0<h.length;)t=[],200<(i=((s=Q.j(h)).right-s.left)*(s.bottom-s.top))&&t.push(N.Es.Xs),100<=i&&t.push(N.Es.Ts),i<100&&t.push(N.Es.Qs),100<=i&&(0===this.Vi.length||Math.random()<.1)&&t.push(N.Es.Ys),s.ri=Q.S(t),s.ri===N.Es.Ys&&this.Vi.push(s),this.Ks(s)},$s:function(i,h,t,s){var n,e,o=s.width/2,r=s.Bs/2,a=s.Vs/2,f=[];if(n=[new W(i-r-a/2,h,r+a/2,o)],s.ri===N.ss.ns){var u=(s.width-s._s)/2;f.push(new k(s.ri,i-r,h-u/2-s._s/2,s.Bs,u,s.Vs)),f.push(new k(s.ri,i-r,h+u/2+s._s/2,s.Bs,u,s.Vs))}else f.push(new k(s.ri,i-r,h,s.Bs,s.width,s.Vs));return e=t===N.Bh.left?180:t===N.Bh.top?270:t===N.Bh.right?0:90,n.forEach(function(t){t.Et({x:i,y:h},e)}),f.forEach(function(t){t.ks({x:i,y:h},e)}),[n,f]},Ks:function(i){var t=null,h={left:i.left*this.Ci,top:i.top*this.Ci,right:i.right*this.Ci,bottom:i.bottom*this.Ci};i.li&N.Bh.left&&(h.left+=1.5*this.Ci),i.li&N.Bh.top&&(h.top+=1.5*this.Ci),i.li&N.Bh.right&&(h.right-=1.5*this.Ci),i.li&N.Bh.bottom&&(h.bottom-=1.5*this.Ci),i.ri===N.Es.Ts?t=this.tn(h):i.ri===N.Es.Qs?t=this.in(h,i):i.ri===N.Es.Xs?t=this.hn(h,i):i.ri===N.Es.Ys&&(t=this.sn(h,i)),t&&(i.fi=t[0],i.ai=t[1]),i.ai.forEach(function(t){t.pi=i,t.bi.forEach(function(t){this.hi(t)},this)},this)},tn:function(t,i){var h,s,n=t.right-t.left,e=t.bottom-t.top,o=[],r=[],a=[N.Ns],f=e<n?e:n;N.Ls.width+100>=f&&a.push(N.Ls);var u,c,l,w,v,d=Q.S(a),p=d.Bs+50,y=d.width/2,m=d.Vs/2,x=Q.D(0,2);if(e<n){for(l=Math.floor(n/p),w=Math.random()*(n-l*p),c=t.top+y;c+y<t.bottom;){for(h=0;h<l;h+=1)u=t.left+h*p+x*(d.Bs+m)+w,s=this.$s(u,c,x?N.Bh.right:N.Bh.left,d),o=o.concat(s[0]),r=r.concat(s[1]);c+=50+d.width}var b=null,M=null;o.forEach(function(t){(!b||t.y<b.y)&&(b=t),(!M||t.y>M.y)&&(M=t)}),b&&M?(v=Math.random()*(e-(M.y+M.W-(b.y-b.W))),o.forEach(function(t){t.y+=v}),r.forEach(function(t){t.bi.forEach(function(t){t.y+=v}),t.yi.y+=v})):console.log("Empty room")}else{for(l=Math.floor(e/p),w=Math.random()*(e-l*p),u=t.left+y;u+y<t.right;){for(h=0;h<l;h+=1)c=t.top+h*p+x*(d.Bs+m)+w,s=this.$s(u,c,x?N.Bh.bottom:N.Bh.top,d),o=o.concat(s[0]),r=r.concat(s[1]);u+=50+d.width}var g=null,k=null;o.forEach(function(t){(!g||t.x<g.x)&&(g=t),(!k||t.x>k.x)&&(k=t)}),k&&g?(v=Math.random()*(n-(k.x+k.T-(g.x-g.T))),o.forEach(function(t){t.x+=v}),r.forEach(function(t){t.bi.forEach(function(t){t.x+=v}),t.yi.x+=v})):console.log("Empty room")}return[o,r]},in:function(t,i){var h,s,n,e,o=this.nn(i),r=N.qs,a=r.Bs+r.Vs/2,f=r.width/2,u=a+r._s;return o===N.Bh.left||o===N.Bh.right?(n=t.top+f,s=(e=t.bottom-f)<=n?(t.top+t.bottom)/2:Q.I(n,e)):(n=t.left+f,h=(e=t.right-f)<=n?(t.left+t.right)/2:Q.I(n,e)),o===N.Bh.right?h=t.left+u:o===N.Bh.left?h=t.right-u:s=o===N.Bh.bottom?t.top+u:t.bottom-u,this.$s(h,s,o,r)},hn:function(t,i){var h,s,n,e=t.right-t.left,o=t.bottom-t.top;n=o<e?(h=e,s=o,0):(h=o,s=e,1);var r,a,f,u,c,l,w,v,d,p,y,m,x=Math.floor((s-30)/130),b=Math.floor((h-30)/280),M=(s-30)%130-30,g=(h-30)%280-30,k=Math.floor(M/50),A=Math.floor(g/50),O=[],I=[];0<k&&(x+=1),0<A&&(b+=1);var D=[],S=[];for(r=0;r<x;r+=1)for(l=130*r+30,d=0<k&&r===x-1?k:2,a=0;a<b;a+=1)for(m=new W((c=280*a+30)+50*(p=0<A&&a===b-1?A:5)/2,l+50,50*p/2,2),S.push(m),f=0;f<d;f+=1){for(v=l+50*f,y=f%2==0?N.Bh.top:N.Bh.bottom,u=0;u<p;u+=1)(m=new W((w=c+50*u)+25,v+25,25,25)).en=y,D.push(m),m=new W(w,v+25,2,25),S.push(m);m=new W(c+50*p,v+25,2,25),S.push(m)}var j,F,C=(t.left+t.right)/2,P=(t.top+t.bottom)/2,E={x:h/2,y:s/2},R=C-E.x,Y=P-E.y;return j=0===n?[0,180]:[90,270],F=Q.S(j),D.forEach(function(t){if(0!==F){t.Et(E,F);var i,h=Math.round(F/90);for(i=0;i<h;i+=1)t.en<<=1,8<t.en&&(t.en=1)}t.x+=R,t.y+=Y;var s,n,e=Q.F(15^t.en);n=e===N.Bh.right?(s=t.x+t.T,t.y):e===N.Bh.bottom?(s=t.x,t.y+t.W):e===N.Bh.left?(s=t.x-t.T,t.y):(s=t.x,t.y-t.W);var o=this.$s(s,n,e,N.Gs);O=O.concat(o[0]),I=I.concat(o[1])},this),S.forEach(function(t){0!==F&&t.Et(E,F),t.x+=R,t.y+=Y,O.push(t.Ct()),I.push({pi:null,ri:N.ss.Hs,bi:[new z(X(t.Yt(),{at:"black"}))]})}),[O,I]},sn:function(t,i){this.nn(i);return[[],[]]},nn:function(t){var i,h,s=0,n=[];for(i=1;i<=8&&!s;i<<=1)i===t.li?s=i:0<(t.li&i)&&n.push(i);if(s||(5===t.li?s=Q.S([1,4]):10===t.li&&(s=Q.S([2,8]))),!s)for(h=1;h<=8&&!s;h<<=1)i=h,i|=8<h<<1?1:h<<1,(i|=h>>1<1?8:h>>1)===t.li&&(s=h);return s||(s=Q.S(n)),s},on:function(t,i,h,s){var n=null,e=null,o=this.Ci/2,r=null,a=!0,f=0,u=0;switch(h){case N.Ds.js:e=new W(t*this.Ci+o,i*this.Ci+o,o,o),a=!1;break;case N.Ds.Ss:a=!0;break;case N.Ds.Fs:n=Y.f.e,a=!0,f=-t*this.Ci,u=-i*this.Ci;break;case N.Ds.Cs:a=!0}return n&&(r=new z({x:t*this.Ci,y:i*this.Ci,w:this.Ci,h:this.Ci,at:n,ut:f,ct:u})),{ri:h,rn:r,Gi:e,pi:s,an:a}},fn:function(t,i){return this.Fi[t]&&this.Fi[t][i]?this.Fi[t][i]:null},Us:function(t,i,h,s){this.Fi[t]||(this.Fi[t]={});var n=this.Fi[t][i];n&&n.rn&&this.si(n.rn),n=this.on(t,i,h,s),(this.Fi[t][i]=n).rn&&this.hi(n.rn)},un:function(t,i){return this.fn(Math.floor(t/this.Ci),Math.floor(i/this.Ci))},cn:function(t,i){var h,s,n=[],e=Math.floor(t/this.Ci),o=Math.floor(i/this.Ci),r=null,a=N.Ps;for(s=0;s<a.length;s+=1)h=a[s],(r=this.fn(e+h.x,o+h.y))&&n.push(r);return n}}),A.prototype=t(u.prototype,{ln:function(t){this.eh|=t,this.wn()},vn:function(t){this.eh^=t,this.wn()},dn:function(){this.eh=0,this.wn()},wn:function(){this.$i.x=0,this.$i.y=0,this.eh&N.Bh.left&&(this.$i.x-=this.Ji),this.eh&N.Bh.right&&(this.$i.x+=this.Ji),this.eh&N.Bh.top&&(this.$i.y-=this.Ji),this.eh&N.Bh.bottom&&(this.$i.y+=this.Ji)},Hh:function(){this.Ui.gt(this.Gi.x,this.Gi.y),this.Gi.gt(this.x,this.y)},Ut:function(t){var i,h,s,n,e,o,r=1,a=0,f=0;s=this.ki.un(this.x,this.y),this.wn(),(this.$i.x||this.$i.y)&&(this.vt.angle=T.R(this.$i));var u=null;for(this.nh&&s&&s.pi&&s.pi.fi&&(u=s.pi.fi),e=0;e<this.Ki;e+=1){if(r=1,u)for(this.pn(t),h=0;h<u.length;h+=1)(n=this.yn(u[h],t))<r&&(r=n,a=this.ih.x,f=this.ih.y);this.x+=this.$i.x*t*r/this.Ki,this.y+=this.$i.y*t*r/this.Ki,r<1&&(o=(this.$i.x*f+this.$i.y*a)*(1-r),this.$i.x=o*f,this.$i.y=o*a),this.Hh()}if(r<1&&(o=(this.$i.x*f+this.$i.y*a)*(1-r),this.x+=o*f*t/this.Ki,this.y+=o*a*t/this.Ki,this.Hh()),s&&s.pi&&s.pi.ai){var c=s.pi.ai,l=!1;for(h=0;h<c.length;h+=1)if(c[h].ri===N.ss.hs||c[h].ri===N.ss.ns){var w=c[h];w.wi&&w.yi.jt(this.Gi)&&w.Is(this),l=l||w.wi}s.pi.wi=l}if(this.sh)for(i=this.ki.cn(this.x,this.y),h=0;h<i.length;h+=1)!(s=i[h]).an&&s.Gi&&this.mn(s.Gi);if((s=this.ki.un(this.x,this.y))&&s.pi&&this.hh!==s.pi){var v=this.hh;if(this.hh=s.pi,v&&(!v.Js||!this.hh.Js)){v.xn&&(v.xn.Zt(),v.xn=null);var d=new p({H:v.ci,N:"alpha",from:0,B:1,V:.5});v.xn=d,this.Ai.lh.ah.Kt(d)}this.hh.xn&&(this.hh.xn.Zt(),this.hh.xn=null),this.hh.ci.alpha=0}},mn:function(t){var i,h;t.jt(this.Gi)&&(i=this.Gi.x-t.x,h=this.Gi.y-t.y,Math.abs(i)>Math.abs(h)?this.x=0<i?t.Ot()+this.Gi.T+1:t.kt()-this.Gi.T-1:this.y=0<h?t.It()+this.Gi.W+1:t.At()-this.Gi.W-1,this.Hh())},yn:function(t,i){if(!this.Zi.jt(t))return this.ih.x=0,this.ih.y=0,1;var h,s,n,e,o,r,a,f;n=0<this.$i.x?(h=t.x-t.T-(this.Gi.x+this.Gi.T),t.x+t.T-(this.Gi.x-this.Gi.T)):(h=t.x+t.T-(this.Gi.x-this.Gi.T),t.x-t.T-(this.Gi.x+this.Gi.T)),e=0<this.$i.y?(s=t.y-t.W-(this.Gi.y+this.Gi.W),t.y+t.W-(this.Gi.y-this.Gi.W)):(s=t.y+t.W-(this.Gi.y-this.Gi.W),t.y-t.W-(this.Gi.y+this.Gi.W)),a=0===this.$i.x?(o=-Number.MAX_VALUE,Number.MAX_VALUE):(o=h/(this.$i.x*i/this.Ki),n/(this.$i.x*i/this.Ki)),f=0===this.$i.y?(r=-Number.MAX_VALUE,Number.MAX_VALUE):(r=s/(this.$i.y*i/this.Ki),e/(this.$i.y*i/this.Ki));var u=Math.max(o,r);return Math.min(a,f)<u||o<0&&r<0||1<o||1<r?(this.ih.x=0,this.ih.y=0,1):(r<o?(this.ih.x=h<0?1:-1,this.ih.y=0):(this.ih.x=0,this.ih.y=s<0?1:-1),u)},pn:function(t){var i=this.$i.x*t/this.Ki,h=this.$i.y*t/this.Ki,s=0<this.$i.x?this.Gi.x-this.Gi.T:this.Gi.x-this.Gi.T+i,n=0<this.$i.y?this.Gi.y-this.Gi.W:this.Gi.y-this.Gi.W+h,e=0<this.$i.x?this.Gi.x+this.Gi.T+i:this.Gi.x+this.Gi.T,o=0<this.$i.y?this.Gi.y+this.Gi.W+h:this.Gi.y+this.Gi.W;this.Zi.x=(s+e)/2,this.Zi.y=(n+o)/2,this.Zi.T=(e-s)/2,this.Zi.W=(o-n)/2}}),O.prototype=t(z.prototype,{}),I.prototype={Gt:function(){this.Si=!0,setTimeout(this.bn.bind(this),1e3*this.rh)},bn:function(){if(!this.Si)return!1;var t,i;t=new p({H:this.uh,N:"y",from:5,B:15,V:.5,L:p.q.Wt,U:function(){this.ah.Kt(i)}.bind(this)}),i=new p({H:this.uh,N:"y",from:15,B:5,V:.5,L:p.q.Wt,U:this.bn.bind(this)}),this.ah.Kt(t)},Mn:function(){this.Si=!1,this.tt.forEach(function(t){t.Zt()})}},D.prototype=t(u.prototype,{create:function(){},v:function(){},$h:function(t){this.wh.push(t)},Ut:function(t){for(var i=0;i<this.wh.length;i+=1)this.wh[i](t)},ti:function(t){this.ii(t)}}),S.gh={Mh:1,gn:2,ys:3,kn:4},S.prototype=t(D.prototype,{An:function(){return this.bh===S.gh.ys||this.bh===S.gh.kn},_h:function(t){this.Vh[t]&&(this.An()||(this.bh===S.gh.Mh&&(f.Jt.Kt(new p({H:this.Gh,N:"alpha",from:1,B:0,V:.5})),this.bh=S.gh.gn),this.zh.ln(this.Vh[t])))},qh:function(t){this.An()?this.Ah<=0&&this.lh.ps(new S(this.lh)):this.Vh[t]&&this.zh.vn(this.Vh[t])},v:function(){this.Lh.v()},ts:function(t){this.zh.Ut(t),this.Wh||(this.ki.x=Math.floor(w.width/2-this.zh.x*this.ki.it),this.ki.y=Math.floor(w.height/2-this.zh.y*this.ki.ht)),this.On(),this.In(),this.bh===S.gh.gn?(this.kh-=t,this.kh<=0&&(this.bh=S.gh.kn,this.zh.dn(),this.Dn(this.bh)),this.Xh.dt="Time left: "+Math.ceil(this.kh)+"s"):this.An()&&(0<this.Ah?(this.Ah-=t,this.Jh.dt="Continue in "+Math.ceil(this.Ah)):this.Jh.dt="Press any movement key to restart")},On:function(){var t,i,h,s,n,e,o;for(t=0;t<this.vh.length;t+=1)(i=this.vh[t]).wi&&(s=this.mh[i.oi],this.zh.hh!==i?(s.st=!0,e=i.vi.x-this.zh.x,o=i.vi.y-this.zh.y,n=Math.sqrt(e*e+o*o),h=Math.atan2(o,e),s.angle=h,s.os(n)):s.st=!1)},In:function(){for(var t,i,h=!1;0<this.xh.length&&this.xh[0].Sn<this.lh.$;)t=this.xh.shift(),this.Qh.si(t.oh),h=!0;if(h)for(i=0;i<this.xh.length;i+=1)this.xh[i].oh.y=18*i},jn:function(t){var i={oh:new l({x:-200,y:18*this.xh.length,alpha:0,dt:t,font:"16px Arial",at:"#ffffff",pt:"left",yt:"top"}),Sn:this.lh.$+5e3};this.xh.push(i),this.Qh.hi(i.oh);var h=new p({H:i.oh,N:"x",from:-200,B:0,V:1,L:p.q.zt});f.Jt.Kt(h),h=new p({H:i.oh,N:"alpha",from:0,B:1,V:.5}),f.Jt.Kt(h)},Th:function(){var t,i,h,s=this.ki.Hi.filter(function(t){return t.ai&&t.ai.length&&t.ai.some(function(t){return t.ri===N.ss.hs||t.ri===N.ss.ns})}),n=Q.D(w.minMailableRooms,Math.max(w.minMailableRooms+1,Math.floor(s.length*w.maxMailableRoomRate))),e=[];for(t=0;t<n;t+=1)i=Q.j(s),h=C("white"),this.Rh.hi(h),this.mh[i.oi]=h,i.wi=!0,e.push(i);var o=e.reduce(j,[]),r=s.reduce(j,[]),a=Q.D(w.minMissingPeople,w.maxMissingPeople+1);a>o.length&&(a=o.length);var f,u,c=[],l=[];for(t=0;t<a;t+=1)f=Q.j(o),u=Q.j(r),f.Mi=u.oi,u.gi=f.oi,c.push(f),l.push(u),f.Ii=this.Fn.bind(this),u.Di=this.Cn.bind(this),u.Oi=this.Pn.bind(this);o.forEach(function(t){t.Oi=this.Pn.bind(this)},this),o.forEach(F),c.forEach(F),l.forEach(F),this.vh=e,this.dh=o,this.ph=c,this.yh=l,this.En=o.concat(l),this.Yh.dt="Mail left: "+this.En.length},Pn:function(t){var i=this.En.reduce(function(t,i){return t+(i.wi?1:0)},0);this.Yh.dt="Mail left: "+i,i<=0&&(this.bh=S.gh.ys,this.zh.dn(),this.Dn(this.bh))},Fn:function(i){var t=this.yh.find(function(t){return t.oi===i.Mi});if(t){if(t.wi&&-1===this.vh.indexOf(t.pi)){t.pi.wi=!0,t.es(!0),this.vh.push(t.pi);var h=C("blue");this.mh[t.pi.oi]=h,this.Rh.hi(h),this.jn("404 Employee not found. Moved to another desk")}}else console.log("desk "+i.Mi+" not found")},Cn:function(i){var t=this.ph.find(function(t){return t.oi===i.gi});t&&t.wi&&(t.Is(this.zh),this.jn("302 Found new desk of employee, unregistering old desk"))},Dn:function(t){this.Zh.dt=t===S.gh.ys?"Delivered on time!":"Too late, offices are open.",this.Kh.st=!1,f.Jt.Kt(new p({H:this.Gh,N:"alpha",from:0,B:1,V:.5}))}}),P.prototype=t(D.prototype,{v:function(){this.vs.forEach(function(t){t.Mn()}),clearInterval(this.ds),this.Lh.v()},ts:function(t){this.$+=t;var i,h,s=this.$%this.rs/this.rs;for(this.s.it=1+.05*Math.cos(s*Math.PI*2),this.s.ht=1+.05*Math.sin(s*Math.PI*2),this.ls.ut-=200*t,this.ws.x-=200*t,i=0;i<this.cs.length;i+=1)(h=this.cs[i]).x+this.ws.x<-200&&(this.ws.si(h),this.cs.splice(i,1),i-=1);this.us-=t,this.us<=0&&(h=new O({x:-this.ws.x+this.s.x,y:this.s.y,it:4,ht:4,angle:Q.I(0,2*Math.PI)}),this.cs.push(h),this.ws.hi(h),this.us=Q.I(this.as,this.fs))}}),E.prototype=t(D.prototype,{create:function(){Object.entries(Y.i).forEach(function(t){var i=new Image;i.onload=this.Rn.bind(this),i.src=t[1],this.i.push(i),Y.a[t[0]]=i},this)},Rn:function(t){if(!this.ys){var i=this.i.reduce(function(t,i){return(i.complete?1:0)+(t||0)},0);this.ms.dt=Math.floor(i/this.i.length*100)+"%",i>=this.i.length&&this.Yn()}},Yn:function(){this.ys||(Object.entries(Y.n).forEach(function(t){Y.f[t[0]]=this.lh.bt.createPattern(Y.a[t[0]],t[1])},this),this.ys=!0,this.lh.ps(new P(this.lh)))}}),R.prototype={gs:function(){this.Ms(),setTimeout(function(){this.Ms()}.bind(this),100)},Ms:function(){var t,i,h=o.getComputedStyle(r.u("root")),s=parseInt(h.width,10),n=parseInt(h.height,10),e=this.xt.width/this.xt.height;s/n<e?i=(t=s)/e:t=(i=n)*e,this.xt.style.width=Math.floor(t)+"px",this.xt.style.height=Math.floor(i)+"px",this.xt.style.position="absolute",this.xt.style.left="50%",this.xt.style.top="50%",this.xt.style.marginLeft=Math.floor(-t/2)+"px",this.xt.style.marginTop=Math.floor(-i/2)+"px"},ps:function(t){this.Ai&&this.Ai.v(),(this.Ai=t).create()},Ut:function(t){var i=(t-this.$)/1e3;0<i&&(.2<i&&(i=.2),this.Ai.Ut(i),this.Ai.ti(this.bt),this.ah.Ut(i),this.$=t),requestAnimationFrame(this.Ut)}},o.game=new R}(window,document);