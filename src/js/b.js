!function(r,i){var w={t:"Mail Delivery",width:640,height:360,minMailableRooms:2,maxMailableRoomRate:.25,minMissingPeople:5,maxMissingPeople:10},F={i:{h:"robot_3Dblue.png"},s:{n:"repeat",e:"repeat",r:"repeat"},o:{},u:{}};function S(t,i){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(h[e]=n[e])}return h}function t(){return S.apply(this,[{}].concat(Array.prototype.slice.call(arguments)))}var h,o=(h={},{a:function(t){return h[t]||(h[t]=i.getElementById(t)),h[t]},create:function(t){return i.createElement(t)}});function e(t,i,h){var s={c:t,f:!1,l:i,w:h,v:function(t){t.keyCode===s.c&&(!s.f&&s.l&&s.l(),s.f=!0),t.preventDefault()},d:function(t){t.keyCode===s.c&&(s.f&&s.w&&s.w(),s.f=!1),t.preventDefault()},p:function(){r.removeEventListener("keydown",s.v,!1),r.removeEventListener("keyup",s.d,!1)}};return r.addEventListener("keydown",s.v,!1),r.addEventListener("keyup",s.d,!1),s}e.keys={M:65,m:87,b:83,g:68,left:37,k:38,right:39,I:40,O:32,C:13};var z=null;z={D:function(t,i){return t+Math.random()*(i-t)},R:function(t,i){return Math.floor(z.D(t,i))},A:function(t){return t[z.R(0,t.length)]},P:function(t){var i=z.R(0,t.length),h=t[i];return t.splice(i,1),h}};var T={j:function(t,i){return t.left<i.right&&t.right>i.left&&t.top<i.bottom&&t.bottom>i.top},Q:function(t){return Math.atan2(t.y,t.x)},F:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},S:function(t,i){var h=Math.cos(i),s=Math.sin(i);return{x:t.x*h-t.y*s,y:t.x*s+t.y*h}},z:function(t,i,h){if(0===h)return{left:t.left,top:t.top,right:t.right,bottom:t.bottom};var s,n,e=t.right-t.left,r=t.bottom-t.top,o=h/360*Math.PI*2;return 90!==h&&270!==h||(n=e,e=r,r=n),(s=90===h?{x:t.left,y:t.bottom}:180===h?{x:t.right,y:t.bottom}:{x:t.right,y:t.top}).x-=i.x,s.y-=i.y,s=T.S(s,o),{left:i.x+s.x,top:i.y+s.y,right:i.x+s.x+e,bottom:i.y+s.y+r}}};function f(t,i,h,s){this.x=t||0,this.y=i||0,this.T=h||0,this.W=s||0}function d(t){this.B=S({N:null,H:null,from:0,V:1,X:1,Y:d._.L,q:null},t||{}),this.G=-1,this.U=-1,this.J=!1}function u(){this.K=0,this.Z=[]}function s(t){var i=S({x:0,y:0,$:1,tt:1,angle:0,it:!0,alpha:1,ht:0,st:0},t||{});this.nt=null,this.x=i.x,this.y=i.y,this.$=i.$,this.tt=i.tt,this.angle=i.angle,this.it=i.it,this.alpha=i.alpha,this.ht=i.ht,this.st=i.st}function a(t){s.apply(this,arguments),this.et=[]}function W(t){s.apply(this,arguments);var i=S({m:0,rt:0,ot:"black"},t||{});this.m=i.m,this.rt=i.rt,this.ot=i.ot}function n(t){s.apply(this,arguments);var i=S({m:0,rt:0,ut:null},t||{});this.m=i.m,this.rt=i.rt,this.ut=i.ut,this.m&&!i.$&&(this.$=this.m/this.ut.width),this.rt&&!i.tt&&(this.tt=this.rt/this.ut.height)}function c(t){s.apply(this,arguments);var i=S({at:"",ct:"left",ft:"top",font:null,ot:"black"},t||{});this.ot=i.ot,this.at=i.at,this.ct=i.ct,this.ft=i.ft,this.font=i.font}function l(t){s.apply(this,arguments);var i=S({lt:[],ot:"black"},t||{});this.lt=i.lt,this.ot=i.ot}function v(t){a.apply(this,arguments);var i=S({m:100,rt:100},t||{});this.wt=o.create("canvas"),this.wt.width=i.m,this.wt.height=i.rt,this.vt=this.wt.getContext("2d")}function p(t,i,h,s,n){var e,r=[],o=s/(h-1);for(e=0;e<h;e+=1)r.push({x:e*o,y:t+i-n/2}),i*=-1;for(i*=-1,e=h-1;0<=e;e-=1)r.push({x:e*o,y:t+i+n/2}),i*=-1;return r}f.dt=function(t){return new f((t.left+t.right)/2,(t.top+t.bottom)/2,(t.right-t.left)/2,(t.bottom-t.top)/2)},(f.prototype={}).pt=function(t,i){this.x=t||0,this.y=i||0},f.prototype.yt=function(){return this.x-this.T},f.prototype.Mt=function(){return this.y-this.W},f.prototype.mt=function(){return this.x+this.T},f.prototype.bt=function(){return this.y+this.W},f.prototype.xt=function(){return 2*this.T},f.prototype.gt=function(){return 2*this.W},f.prototype.kt=function(t){return Math.abs(this.x-t.x)<this.T+t.T&&Math.abs(this.y-t.y)<this.W+t.W},f.prototype.It=function(t,i){return Math.abs(this.x-t)<this.T&&Math.abs(this.y-i)<this.W},f.prototype.Ot=function(){return new f(this.x,this.y,this.T,this.W)},f.prototype.Ct=function(t){return this.T+=t,this.W+=t,this},f.prototype.Dt=function(t,i){var h,s=i/360*Math.PI*2;90!==i&&270!==i||(h=this.T,this.T=this.W,this.W=h);var n=T.S({x:this.x-t.x,y:this.y-t.y},s);return this.x=t.x+n.x,this.y=t.y+n.y,this},f.prototype.Rt=function(){return{left:this.x-this.T,top:this.y-this.W,right:this.x+this.T,bottom:this.y+this.W}},d._={L:function(t){return t},At:function(t){return t*t},Pt:function(t){return t*(2-t)},jt:function(t){return t<.5?2*t*t:(4-2*t)*t-1},Qt:function(t){return t*t*t},Ft:function(t){return--t*t*t+1},St:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},zt:function(t){return t*t*t*t},Tt:function(t){return 1- --t*t*t*t},Wt:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},Bt:function(t){return t*t*t*t*t},Et:function(t){return 1+--t*t*t*t*t},Nt:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},d.prototype={Ht:function(t){this.G=t,this.U=t+this.B.X},Vt:function(t){if(this.B.N&&this.B.H){var i=(t-this.G)/this.B.X;1<i&&(i=1);var h=this.B.Y(i),s=this.B.from+(this.B.V-this.B.from)*h;this.B.N[this.B.H]=s}},Xt:function(){this.J=!0}},u.Yt=null,u.prototype={Lt:function(t){t.Ht(this.K),this.Z.push(t)},Vt:function(t){var i,h,s;for(i=0;i<this.Z.length;i+=1)s=!1,(h=this.Z[i]).J||h.Vt(this.K),h.J?s=!0:this.K>=h.U&&(h.B.q&&h.B.q(),s=!0),s&&(this.Z.splice(i,1),i-=1);this.K+=t}},a.prototype=t(s.prototype={_t:function(t){this.it&&.01<=this.alpha&&(t.save(),(this.x||this.y)&&t.translate(this.x,this.y),1===this.$&&1===this.tt||t.scale(this.$,this.tt),this.angle&&t.rotate(this.angle),(this.ht||this.st)&&t.translate(-this.ht/this.$,-this.st/this.tt),this.alpha<1&&(t.globalAlpha*=this.alpha),this.qt(t),t.restore())},qt:function(t){}},{Gt:function(t){return this.et.push(t),t.nt=this},Ut:function(t){var i=this.et.indexOf(t);return 0<=i&&(this.et.splice(i,1),t.nt=null),this},qt:function(t){for(var i=0;i<this.et.length;i+=1)this.et[i]._t(t)}}),W.prototype=t(s.prototype,{qt:function(t){t.fillStyle=this.ot,t.fillRect(0,0,this.m,this.rt)}}),n.prototype=t(s.prototype,{qt:function(t){t.drawImage(this.ut,0,0)}}),c.prototype=t(s.prototype,{qt:function(t){this.font&&(t.font=this.font),t.textAlign=this.ct,t.textBaseline=this.ft,t.fillStyle=this.ot,t.fillText(this.at,0,0)}}),l.prototype=t(s.prototype,{qt:function(t){var i,h;for(t.beginPath(),i=0;i<this.lt.length;i+=1)h=this.lt[i],0===i?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);t.closePath(),t.fillStyle=this.ot,t.fill()}}),v.prototype=t(a.prototype,{Jt:function(t,i){this.wt.width=t,this.wt.height=i},Gt:function(t){a.prototype.Gt.apply(this,arguments),this.Kt()},Ut:function(t){a.prototype.Ut.apply(this,arguments),this.Kt()},Kt:function(){this.vt.clearRect(0,0,this.wt.width,this.wt.height);for(var t=0;t<this.et.length;t+=1)this.et[t]._t(this.vt)},qt:function(t){t.drawImage(this.wt,0,0)}});var y,M,m,b=((y=new v({m:70,rt:70})).Gt(new W({m:70,rt:70,ot:"#c99869"})),y.Gt(new l({lt:p(25,5,7,70,16),ot:"#c58f5c"})),y.Gt(new l({lt:p(55,5,7,70,16),ot:"#c58f5c"})),y),x=((M=new v({m:70,rt:70})).Gt(new W({m:70,rt:70,ot:"#838796"})),M.Gt(new l({lt:p(25,5,7,70,24),ot:"#7e8291"})),M.Gt(new l({lt:p(55,5,7,70,16),ot:"#7e8291"})),M),g=((m=new v({m:70,rt:70})).Gt(new W({m:70,rt:70,ot:"#acc0c1"})),m.Gt(new l({lt:p(25,5,7,70,16),ot:"#bbcbcc"})),m.Gt(new l({lt:p(55,5,7,70,16),ot:"#bbcbcc"})),m);function B(t,i){this.Zt=t,this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom,this.$t=0,this.ti=[],this.ii=[],this.hi=!1,this.si=null,this.ni=0,this.ei=!1}function k(t,i,h,s,n,e,r){this.Zt=k.ri++,this.$t=t,this.oi=r;var o=i-s/2,u=h;this.ui=new f((i+o)/2,(h+u)/2,(s+e/2)/2+k.ai,(n+e/2)/2+k.ai),this.ci=[new W({x:i-s/2,y:h-n/2,m:s,rt:n,ot:"#990000"}),new W({x:i-s/2-e/2,y:h-e/2,m:e,rt:e,ot:"#990000"})],this.ei=!1,this.fi=-1,this.li=-1,this.wi=null,this.vi=null,this.di=null,this.pi=null}function E(){a.apply(this,arguments),this.yi={},this.Mi=20,this.mi=1e3,this.bi=20,this.xi=20,this.gi=100,this.ki=12,this.Ii=12,this.Oi=2,this.Ci=0,this.Di=0,this.Ri=[],this.Ai=[],this.Pi=null,this.ji=[],this.Qi=0,this.Fi=0,this.Si=new v,this.Gt(this.Si)}function I(t,i){a.call(this,i),this.vi=t;var h=S({wi:null},i||{});this.zi=new f(0,0,10,10),this.Ti=new f(0,0,10,10),this.Wi=new f(0,0,10,10),this.Bi=200,this.Ei={x:0,y:0},this.Ni={x:0,y:0},this.Hi={x:0,y:0},this.wi=h.wi,this.Vi=null;var s=new n({ut:F.o.h,m:19,rt:20,ht:10,st:10});this.Gt(s),this.ut=s,this.Xi=!0,this.Yi=!0,this.Li=0}function O(t,i){a.call(this),this._i=t,this.B=i,this.qi=[]}function C(){O.apply(this,arguments),this.Gi=[],this.Ui=[],this.Ji=[],this.Ki=[],this.Zi={},this.$i={th:60,ih:70,hh:60,sh:70},this.Ci=z.R(this.$i.th,this.$i.ih),this.Di=z.R(this.$i.hh,this.$i.sh);var t=new W({m:w.width,rt:w.height,ot:"#333333"});if(this.Gt(t),this.wi=new E,this.Gt(this.wi),this.wi.nh(this.Ci,this.Di),this.wi.eh(),this.wi.rh(),this.wi.$=2,this.wi.tt=2,this.oh=new a({x:w.width/2,y:w.height/2}),this.Gt(this.oh),this.uh(),this.ah=!1,this.ah){var i=this.wi.Ci*this.wi.Mi,h=this.wi.Di*this.wi.Mi;i/h>w.width/w.height?this.wi.$=this.wi.tt=w.width/i:this.wi.$=this.wi.tt=w.height/h,this.wi.Ri.forEach(function(t){t.si.it=!1}),this.wi.Ai[0].si.it=!1}var s=this.ch=new I(this,{wi:this.wi});this.wi.Gt(this.ch);var n=this.wi.Pi;this.ch.x=(n.left+n.right)/2*this.wi.Mi,this.ch.y=(n.top+n.bottom)/2*this.wi.Mi,this.ch.fh(),this.keys=[],this.lh=e(e.keys.M,function(){s.wh(E.vh.left)},function(){s.dh(E.vh.left)}),this.keys.push(this.lh),this.ph=e(e.keys.b,function(){s.wh(E.vh.bottom)},function(){s.dh(E.vh.bottom)}),this.keys.push(this.ph),this.yh=e(e.keys.g,function(){s.wh(E.vh.right)},function(){s.dh(E.vh.right)}),this.keys.push(this.yh),this.Mh=e(e.keys.m,function(){s.wh(E.vh.top)},function(){s.dh(E.vh.top)}),this.keys.push(this.Mh);this.mh(this.bh.bind(this))}function D(t,i){return t.concat(i.ti.filter(function(t){return t.$t===E.gh.xh||t.$t===E.gh.kh}))}function R(t){t.ei=!0}function A(t){var i=new a;return i.Gt(new l({x:150,y:0,lt:[{x:20,y:0},{x:-15,y:-10},{x:-15,y:10}],ot:t})),i}function P(){O.apply(this,arguments),this.i=[],this.Ih=!1,this.Oh=new c({x:w.width/2,y:w.height/2,at:"0%",ot:"black",ct:"center",ft:"middle",font:"32px Arial"});this.Gt(new W({m:w.width,rt:w.height,ot:"#777777"})),this.Gt(this.Oh)}function j(){this.Vt=this.Vt.bind(this),this.Ch=o.a("root");var t=o.create("canvas");t.width=w.width,t.height=w.height,this.Ch.appendChild(t),this.Dh=F,this.wt=t,this.vt=t.getContext("2d"),this.vt.font="16px Arial",this.Rh=new u,u.Yt=this.Rh,this.vi=new P(this),this.K=0,this.Ah=this.Ah.bind(this),r.addEventListener("resize",this.Ph.bind(this),!1),this.Ph(),this.Vt(0),this.vi.create()}F.o.n=b.wt,F.o.r=x.wt,F.o.e=g.wt,B.prototype={},k.ri=0,k.ai=5,k.prototype={jh:function(h,t){var s=t/360*Math.PI*2;this.ci.forEach(function(t){var i=T.S({x:t.x-h.x,y:t.y-h.y},s);t.x=h.x+i.x,t.y=h.y+i.y,t.angle=s}),this.ui.Dt(h,t)},Qh:function(t){if(this.ei=!1,this.ci.forEach(function(t){t.ot="red",null===this.wi&&(this.wi=t.nt)},this),-1===this.fi){var i=new W({x:t.x,y:t.y,m:20,rt:10,ot:"#eeeeee",ht:10,st:5,angle:z.D(0,2*Math.PI)});this.wi.Gt(i);var h=new d({N:i,H:"x",from:t.x,V:this.ui.x,X:.5,Y:d._.Qt}),s=new d({N:i,H:"y",from:t.y,V:this.ui.y,X:.5,Y:d._.Qt,q:function(){this.wi.Ut(i)}.bind(this)}),n=new d({N:i,H:"angle",from:i.angle,V:i.angle+z.D(-Math.PI,Math.PI),X:.5});u.Yt.Lt(h),u.Yt.Lt(s),u.Yt.Lt(n),-1!==this.li&&this.pi&&this.pi(this)}else this.di&&this.di(this)}},E.Fh={Sh:1,zh:2,Th:3,Wh:4},E.Bh=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:0,y:0},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],E.Eh={Nh:1,Hh:2,Vh:3,Xh:4,Yh:5},E.gh={xh:1,kh:2,Lh:3,_h:4},E.vh={right:1,bottom:2,left:4,top:8},E.qh={width:40,Gh:20,Uh:20,$t:E.gh.xh},E.Jh={width:85,Gh:20,Uh:20,Kh:5,$t:E.gh.kh},E.Zh={width:80,Gh:20,Uh:20},E.ai=5,E.prototype=t(a.prototype,{nh:function(t,i){var h,s,n,e,r,o,u=t,a=i;for(this.Si.Jt(u*this.Mi,a*this.Mi),this.Si.Gt(new W({x:0*this.Mi,y:0*this.Mi,m:u*this.Mi,rt:a*this.Mi,ot:F.u.r})),this.Si.Gt(new W({x:1*this.Mi,y:1*this.Mi,m:(u-2)*this.Mi,rt:(a-2)*this.Mi,ot:F.u.n})),this.Ci=u,this.Di=a,h=0;h<u;h+=1)this.$h(h,0,E.Fh.zh),this.$h(h,a-1,E.Fh.zh);for(h=0;h<a;h+=1)this.$h(0,h,E.Fh.zh),this.$h(u-1,h,E.Fh.zh);for(var c,f,l,w,v,d,p,y=z.R(0,2),M={left:1,top:1,right:u-1,bottom:a-1,ts:y},m=[M],b=[],x=[],g=0,k=0,I=this.bi,O=this.xi,C=this.mi;0<m.length&&g<1e4;)if(f=S({},M=m.shift()),l=null,p=0===(y=M.ts)?(d="right","left"):(d="bottom","top"),0===k?(v=S({},M),3,l=S({},M),c=z.R(M[p]+I/2,M[d]-I/2),f[d]=c-this.Oi/2-1,l[p]=c+this.Oi/2+1,v[d]=c+this.Oi/2,v[p]=c-this.Oi/2,v.hs=!0,b.push(v)):(l=S({},M),c=z.R(M[p]+I/2,M[d]-I/2),f[d]=c,l[p]=c+1),n=f.right-f.left,e=f.bottom-f.top,I<n&&O<e&&C<n*e?(f.ts=0===k?y?0:1:e<n?0:1,m.push(f)):x.push(f),l&&(n=l.right-l.left,e=l.bottom-l.top,I<n&&O<e&&O<n*e?(l.ts=0===k?y?0:1:e<n?0:1,m.push(l)):x.push(l)),g+=1,0===k&&0===m.length)for(k+=1,I=this.ki,O=this.Ii,C=this.gi,h=x.length-1;0<=h;h-=1)n=(f=x[h]).right-f.left,e=f.bottom-f.top,I<n&&O<e&&C<n*e&&(f.ts=e<n?0:1,m.push(f),x.splice(h,1));if(1e4<=g)throw new Error("Infinite loop in partitioning");for(this.Ai=b,h=0;h<b.length;h+=1)for(n=(v=b[h]).left;n<v.right;n+=1)for(e=v.top;e<v.bottom;e+=1)this.$h(n,e,E.Fh.Sh,v);var D,R=[];for(h=0;h<x.length;h+=1){for(M=x[h],this.Si.Gt(new W({x:(M.left-1)*this.Mi,y:(M.top-1)*this.Mi,m:(M.right-M.left+2)*this.Mi,rt:(M.bottom-M.top+2)*this.Mi,ot:F.u.r})),this.Si.Gt(new W({x:M.left*this.Mi,y:M.top*this.Mi,m:(M.right-M.left)*this.Mi,rt:(M.bottom-M.top)*this.Mi,ot:F.u.e})),n=M.left-1;n<M.right+1;n+=1)this.$h(n,M.top-1,E.Fh.zh),this.$h(n,M.bottom,E.Fh.zh);for(e=M.top-1;e<M.bottom+1;e+=1)this.$h(M.left-1,e,E.Fh.zh),this.$h(M.right,e,E.Fh.zh);for(w=new B(this.Fi++,M),n=M.left;n<M.right;n+=1)for(e=M.top;e<M.bottom;e+=1)this.$h(n,e,E.Fh.Wh,w);R.push(w)}for(g=0;0<R.length&&g<1e4;){m=g<x.length?b:this.Ri;var A=[];for((D=S({},M=R.shift())).top+=1,D.bottom-=1,D.left-=2,D.right+=2,s=0;s<m.length;s+=1)f=m[s],T.j(D,f)&&A.push(f);for(D.left=M.left+1,D.right=M.right-1,D.top=M.top-2,D.bottom=M.bottom+2,s=0;s<m.length;s+=1)f=m[s],A.indexOf(f)<0&&T.j(D,f)&&A.push(f);if(0<A.length){var P=0;f=z.A(A),D.left=M.left,D.top=M.top,D.right=M.right,D.bottom=M.bottom;var j=!1;D.left-=2,T.j(D,f)&&(j=!0,r=n=f.right,o=(e=z.R(Math.max(M.top,f.top),Math.min(M.bottom,f.bottom)-1))+1,P=E.vh.left),j||(D.left=M.left,D.top-=2,T.j(D,f)&&(j=!0,r=(n=z.R(Math.max(M.left,f.left),Math.min(M.right,f.right)-1))+1,o=e=f.bottom,P=E.vh.top)),j||(D.top=M.top,D.right+=2,T.j(D,f)&&(j=!0,r=n=f.left-1,o=(e=z.R(Math.max(M.top,f.top),Math.min(M.bottom,f.bottom)-1))+1,P=E.vh.right)),j||(r=(n=z.R(Math.max(M.left,f.left),Math.min(M.right,f.right)-1))+1,o=e=f.top-1,P=E.vh.bottom),this.$h(n,e,E.Fh.Th),this.$h(r,o,E.Fh.Th),M.hi=!0,this.Ri.push(M),M.ni||(M.ni=0),f.ni||(f.ni=0),M.ni|=P;var Q=P<<2;8<Q&&(Q>>=4),f.ni|=Q}else M.hi=!1,R.push(M);g+=1}if(1e4<=g)throw new Error("Infinite loop in door placements")},rh:function(){var t,i,h,s=this.Ai;for(h=0;h<this.Ri.length;h+=1)i=this.Ri[h],t=new W({x:Math.floor((i.left-.5)*this.Mi),y:Math.floor((i.top-.5)*this.Mi),m:Math.floor((i.right-i.left+1)*this.Mi),rt:Math.floor((i.bottom-i.top+1)*this.Mi)}),this.Gt(t),i.si=t;var n=new a;for(this.Gt(n),h=0;h<s.length;h+=1)i=s[h],t=new W({x:Math.floor((i.left-.5)*this.Mi),y:Math.floor((i.top-.5)*this.Mi),m:Math.floor((i.right-i.left+1)*this.Mi),rt:Math.floor((i.bottom-i.top+1)*this.Mi)}),n.Gt(t),i.si=n},eh:function(){var t,i,h=this.Ri.slice(),s=z.P(h);for(s.$t=E.Eh.Nh,this.ss(s),this.Pi=s;0<h.length;)t=[],200<(i=((s=z.P(h)).right-s.left)*(s.bottom-s.top))&&t.push(E.Eh.Vh),100<=i&&t.push(E.Eh.Yh),i<100&&t.push(E.Eh.Xh),100<=i&&(0===this.ji.length||Math.random()<.1)&&t.push(E.Eh.Hh),s.$t=z.A(t),s.$t===E.Eh.Hh&&this.ji.push(s),this.ss(s)},ns:function(i,h,t,s){var n,e,r=s.width/2,o=s.Gh/2,u=s.Uh/2,a=[];if(n=[new f(i-o-u/2,h,o+u/2,r)],s.$t===E.gh.kh){var c=(s.width-s.Kh)/2;a.push(new k(s.$t,i-o,h-c/2-s.Kh/2,s.Gh,c,s.Uh)),a.push(new k(s.$t,i-o,h+c/2+s.Kh/2,s.Gh,c,s.Uh))}else a.push(new k(s.$t,i-o,h,s.Gh,s.width,s.Uh));return e=t===E.vh.left?180:t===E.vh.top?270:t===E.vh.right?0:90,n.forEach(function(t){t.Dt({x:i,y:h},e)}),a.forEach(function(t){t.jh({x:i,y:h},e)}),[n,a]},ss:function(i){var t=null,h={left:i.left*this.Mi,top:i.top*this.Mi,right:i.right*this.Mi,bottom:i.bottom*this.Mi};i.ni&E.vh.left&&(h.left+=1.5*this.Mi),i.ni&E.vh.top&&(h.top+=1.5*this.Mi),i.ni&E.vh.right&&(h.right-=1.5*this.Mi),i.ni&E.vh.bottom&&(h.bottom-=1.5*this.Mi),i.$t===E.Eh.Yh&&(t=this.es(h)),t&&(i.ii=t[0],i.ti=t[1]);var s=new W({x:h.left,y:h.top,m:h.right-h.left,rt:h.bottom-h.top,ot:"#007700"});this.Gt(s),i.ti.forEach(function(t){t.oi=i,t.ci.forEach(function(t){this.Gt(t)},this)},this);var n=(i.left+i.right)/2*this.Mi,e=(i.top+i.bottom)/2*this.Mi,r=new c({at:["Unknown","Mailroom","Lobby","Bullpen","Private","Open"][i.$t],x:n,y:e,ct:"center",ft:"middle",font:"36px Arial"});this.Gt(r)},es:function(t){var i,h,s,n,e,r,o,u=t.right-t.left,a=t.bottom-t.top,c=[],f=[],l=z.A([E.qh,E.Jh]),w=l.Gh+50,v=l.width/2,d=l.Uh/2,p=z.R(0,2);if(a<u){for(e=Math.floor(u/w),r=Math.random()*(u-e*w),n=t.top+v;n+v<t.bottom;){for(i=0;i<e;i+=1)s=t.left+i*w+p*(l.Gh+d)+r,h=this.ns(s,n,p?E.vh.right:E.vh.left,l),c=c.concat(h[0]),f=f.concat(h[1]);n+=50+l.width}var y=null,M=null;c.forEach(function(t){(!y||t.y<y.y)&&(y=t),(!M||t.y>M.y)&&(M=t)}),o=Math.random()*(a-(M.y+M.W-(y.y-y.W))),c.forEach(function(t){t.y+=o}),f.forEach(function(t){t.ci.forEach(function(t){t.y+=o}),t.ui.y+=o})}else{for(e=Math.floor(a/w),r=Math.random()*(a-e*w),s=t.left+v;s+v<t.right;){for(i=0;i<e;i+=1)n=t.top+i*w+p*(l.Gh+d)+r,h=this.ns(s,n,p?E.vh.bottom:E.vh.top,l),c=c.concat(h[0]),f=f.concat(h[1]);s+=50+l.width}var m=null,b=null;c.forEach(function(t){(!m||t.x<m.x)&&(m=t),(!b||t.x>b.x)&&(b=t)}),o=Math.random()*(u-(b.x+b.T-(m.x-m.T))),c.forEach(function(t){t.x+=o}),f.forEach(function(t){t.ci.forEach(function(t){t.x+=o}),t.ui.x+=o})}return[c,f]},rs:function(t,i,h,s){var n=null,e=null,r=this.Mi/2,o=null,u=!0;switch(h){case E.Fh.zh:e=new f(t*this.Mi+r,i*this.Mi+r,r,r),u=!1;break;case E.Fh.Sh:u=!0;break;case E.Fh.Th:n="#00aa00",u=!0;break;case E.Fh.Wh:u=!0}return n&&(o=new W({x:t*this.Mi,y:i*this.Mi,m:this.Mi,rt:this.Mi,ot:n})),{$t:h,os:o,zi:e,oi:s,us:u}},as:function(t,i){return this.yi[t]&&this.yi[t][i]?this.yi[t][i]:null},$h:function(t,i,h,s){this.yi[t]||(this.yi[t]={});var n=this.yi[t][i];n&&n.os&&this.Ut(n.os),n=this.rs(t,i,h,s),(this.yi[t][i]=n).os&&this.Gt(n.os)},cs:function(t,i){return this.as(Math.floor(t/this.Mi),Math.floor(i/this.Mi))},fs:function(t,i){var h,s,n=[],e=Math.floor(t/this.Mi),r=Math.floor(i/this.Mi),o=null,u=E.Bh;for(s=0;s<u.length;s+=1)h=u[s],(o=this.as(e+h.x,r+h.y))&&n.push(o);return n}}),I.prototype=t(a.prototype,{wh:function(t){this.Li|=t,this.ls()},dh:function(t){this.Li^=t,this.ls()},ls:function(){this.Ei.x=0,this.Ei.y=0,this.Li&E.vh.left&&(this.Ei.x-=this.Bi),this.Li&E.vh.right&&(this.Ei.x+=this.Bi),this.Li&E.vh.top&&(this.Ei.y-=this.Bi),this.Li&E.vh.bottom&&(this.Ei.y+=this.Bi)},fh:function(){this.Ti.pt(this.zi.x,this.zi.y),this.zi.pt(this.x,this.y)},Vt:function(t){var i,h,s,n,e=1,r=0,o=0;if((this.Ei.x||this.Ei.y)&&(this.ut.angle=T.Q(this.Ei)),s=this.wi.cs(this.x,this.y),this.ls(),this.Yi&&s&&s.oi){if(s.oi.ii){var u=s.oi.ii;for(this.ws(t),h=0;h<u.length;h+=1)(n=this.vs(u[h],t))<e&&(e=n,r=this.Hi.x,o=this.Hi.y)}if(s.oi.ti){var a=s.oi.ti,c=!1;for(h=0;h<a.length;h+=1)if(a[h].$t===E.gh.xh||a[h].$t===E.gh.kh){var f=a[h];f.ei&&f.ui.kt(this.zi)&&f.Qh(this),c=c||f.ei}s.oi.ei=c}}if(this.x+=this.Ei.x*t*e,this.y+=this.Ei.y*t*e,e<1){var l=(this.Ei.x*o+this.Ei.y*r)*(1-e);this.x+=l*o*t,this.y+=l*r*t}if(this.fh(),this.Xi)for(i=this.wi.fs(this.x,this.y),h=0;h<i.length;h+=1)!(s=i[h]).us&&s.zi&&this.ds(s.zi);if((s=this.wi.cs(this.x,this.y))&&s.oi&&this.Vi!==s.oi){var w=this.Vi;if(this.Vi=s.oi,w&&(!w.hs||!this.Vi.hs)){w.ps&&(w.ps.Xt(),w.ps=null);var v=new d({N:w.si,H:"alpha",from:0,V:1,X:.5});w.ps=v,this.vi._i.Rh.Lt(v)}this.Vi.ps&&(this.Vi.ps.Xt(),this.Vi.ps=null),this.Vi.si.alpha=0}},ds:function(t){var i,h;t.kt(this.zi)&&(i=this.zi.x-t.x,h=this.zi.y-t.y,Math.abs(i)>Math.abs(h)?this.x=0<i?t.mt()+this.zi.T+1:t.yt()-this.zi.T-1:this.y=0<h?t.bt()+this.zi.W+1:t.Mt()-this.zi.W-1,this.fh())},vs:function(t,i){if(!this.Wi.kt(t))return this.Hi.x=0,this.Hi.y=0,1;var h,s,n,e,r,o,u,a;n=0<this.Ei.x?(h=t.x-t.T-(this.zi.x+this.zi.T),t.x+t.T-(this.zi.x-this.zi.T)):(h=t.x+t.T-(this.zi.x-this.zi.T),t.x-t.T-(this.zi.x+this.zi.T)),e=0<this.Ei.y?(s=t.y-t.W-(this.zi.y+this.zi.W),t.y+t.W-(this.zi.y-this.zi.W)):(s=t.y+t.W-(this.zi.y-this.zi.W),t.y-t.W-(this.zi.y+this.zi.W)),u=0===this.Ei.x?(r=-Number.MAX_VALUE,Number.MAX_VALUE):(r=h/(this.Ei.x*i),n/(this.Ei.x*i)),a=0===this.Ei.y?(o=-Number.MAX_VALUE,Number.MAX_VALUE):(o=s/(this.Ei.y*i),e/(this.Ei.y*i));var c=Math.max(r,o);return Math.min(u,a)<c||r<0&&o<0||1<r||1<o?(this.Hi.x=0,this.Hi.y=0,1):(o<r?(this.Hi.x=h<0?1:-1,this.Hi.y=0):(this.Hi.x=0,this.Hi.y=s<0?1:-1),c)},ws:function(t){var i=this.Ei.x*t,h=this.Ei.y*t,s=0<this.Ei.x?this.zi.x-this.zi.T:this.zi.x-this.zi.T+i,n=0<this.Ei.y?this.zi.y-this.zi.W:this.zi.y-this.zi.W+h,e=0<this.Ei.x?this.zi.x+this.zi.T+i:this.zi.x+this.zi.T,r=0<this.Ei.y?this.zi.y+this.zi.W+h:this.zi.y+this.zi.W;this.Wi.x=(s+e)/2,this.Wi.y=(n+r)/2,this.Wi.T=(e-s)/2,this.Wi.W=(r-n)/2}}),O.prototype=t(a.prototype,{create:function(){},p:function(){},mh:function(t){this.qi.push(t)},Vt:function(t){for(var i=0;i<this.qi.length;i+=1)this.qi[i](t)},_t:function(t){this.qt(t)}}),C.prototype=t(O.prototype,{p:function(){this.keys.forEach(function(t){t.p()})},bh:function(t){this.ch.Vt(t),this.ah||(this.wi.x=Math.floor(w.width/2-this.ch.x*this.wi.$),this.wi.y=Math.floor(w.height/2-this.ch.y*this.wi.tt)),this.ys()},ys:function(){var t,i,h,s,n,e;for(t=0;t<this.Gi.length;t+=1)(i=this.Gi[t]).ei&&(e=this.Zi[i.Zt],this.ch.Vi!==i?(e.it=!0,h=(i.left+i.right)/2*this.wi.Mi,s=(i.top+i.bottom)/2*this.wi.Mi,n=Math.atan2(s-this.ch.y,h-this.ch.x),e.angle=n):e.it=!1)},uh:function(){var t,i,h,s=this.wi.Ri.filter(function(t){return t.ti&&t.ti.length&&t.ti.some(function(t){return t.$t===E.gh.xh||t.$t===E.gh.kh})}),n=z.R(w.minMailableRooms,Math.max(w.minMailableRooms+1,Math.floor(s.length*w.maxMailableRoomRate))),e=[];for(t=0;t<n;t+=1)i=z.P(s),h=A("white"),this.oh.Gt(h),this.Zi[i.Zt]=h,i.ei=!0,e.push(i);var r=e.reduce(D,[]),o=s.reduce(D,[]),u=z.R(w.minMissingPeople,w.maxMissingPeople+1);u>r.length&&(u=r.length);var a,c,f=[],l=[];for(t=0;t<u;t+=1)a=z.P(r),c=z.P(o),a.fi=c.Zt,c.li=a.Zt,f.push(a),l.push(c),a.di=this.Ms.bind(this),c.pi=this.ms.bind(this);r.forEach(R),f.forEach(R),l.forEach(R),this.Gi=e,this.Ui=r,this.Ji=f,this.Ki=l,this.Ui.forEach(function(t){t.ci.forEach(function(t){t.ot="white"})}),this.Ji.forEach(function(t){t.ci.forEach(function(t){t.ot="blue"})}),this.Ki.forEach(function(t){t.ci.forEach(function(t){t.ot="gray"})})},Ms:function(i){var t=this.Ki.find(function(t){return t.Zt===i.fi});if(t){if(t.ei&&-1===this.Gi.indexOf(t.oi)){t.oi.ei=!0,this.Gi.push(t.oi);var h=A("blue");this.Zi[t.oi.Zt]=h,this.oh.Gt(h)}}else console.log("desk "+i.fi+" not found")},ms:function(i){var t=this.Ji.find(function(t){return t.Zt===i.li});t&&t.ei&&t.Qh(this.ch)}}),P.prototype=t(O.prototype,{create:function(){Object.entries(F.i).forEach(function(t){var i=new Image;i.onload=this.bs.bind(this),i.src=t[1],this.i.push(i),F.o[t[0]]=i},this)},bs:function(t){if(!this.Ih){var i=this.i.reduce(function(t,i){return(i.complete?1:0)+(t||0)},0);this.Oh.at=Math.floor(i/this.i.length*100)+"%",i>=this.i.length&&this.xs()}},xs:function(){this.Ih||(Object.entries(F.s).forEach(function(t){F.u[t[0]]=this._i.vt.createPattern(F.o[t[0]],t[1])},this),this.Ih=!0,this._i.gs(new C(this._i)))}}),j.prototype={Ph:function(){this.Ah(),setTimeout(function(){this.Ah()}.bind(this),100)},Ah:function(){var t,i,h=r.getComputedStyle(o.a("root")),s=parseInt(h.width,10),n=parseInt(h.height,10),e=this.wt.width/this.wt.height;s/n<e?i=(t=s)/e:t=(i=n)*e,this.wt.style.width=Math.floor(t)+"px",this.wt.style.height=Math.floor(i)+"px",this.wt.style.position="absolute",this.wt.style.left="50%",this.wt.style.top="50%",this.wt.style.marginLeft=Math.floor(-t/2)+"px",this.wt.style.marginTop=Math.floor(-i/2)+"px"},gs:function(t){this.vi&&this.vi.p(),(this.vi=t).create()},Vt:function(t){var i=(t-this.K)/1e3;0<i&&(.2<i&&(i=.2),this.vi.Vt(i),this.vi._t(this.vt),this.Rh.Vt(i),this.K=t),requestAnimationFrame(this.Vt)}},r.game=new j}(window,document);